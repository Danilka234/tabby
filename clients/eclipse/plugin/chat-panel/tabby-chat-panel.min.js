var TabbyChatPanel=function(e){"use strict";const r=Symbol.for("quilt.threads.retain"),t=Symbol.for("quilt.threads.release"),n=Symbol.for("quilt.threads.retained-by"),s=Symbol.for("quilt.threads.encode"),o=Symbol.for("quilt.threads.transferable");class i{memoryManaged=new Set;add(e){this.memoryManaged.add(e),e[n].add(this),e[r]()}release(){for(const e of this.memoryManaged)e[n].delete(this),e[t]();this.memoryManaged.clear()}}function a(e){return Boolean(e&&e[r]&&e[t])}function c(e){if(null==e||"object"!=typeof e)return!1;const r=Object.getPrototypeOf(e);return null==r||r===Object.prototype}const l="_@f",u="_@m",f="_@s",p="_@u",h="_@d",E="_@r",m="_@i";function d({encode:e,decode:r}={}){return{encode:function(e,r){const n={api:r,seen:new Map,encode:e=>t(e,n,!0)};return t(e,n)},decode:function(e,r,t){const s={api:r,decode:e=>n(e,s,t,!0)};return n(e,s)}};function t(r,n,i=!1){const{seen:a,api:d,encode:$}=n;if(!i&&e)return e(r,$);if(null==r)return[r];const R=a.get(r);if(R)return R;if(a.set(r,[void 0]),"object"==typeof r){if(r[o]){const e=[r,[r]];return a.set(r,e),e}const e=[],i=r=>{const[s,o=[]]=t(r,n);return e.push(...o),s};if("function"==typeof r[s]){const t=[r[s]({encode:i}),e];return a.set(r,t),t}if(Array.isArray(r)){const t=[r.map((e=>i(e))),e];return a.set(r,t),t}if(r instanceof RegExp){const t=[{[E]:[r.source,r.flags]},e];return a.set(r,t),t}if(r instanceof URL){const t=[{[p]:r.href},e];return a.set(r,t),t}if(r instanceof Date){const t=[{[h]:r.toISOString()},e];return a.set(r,t),t}if(r instanceof Map){const t=[...r.entries()].map((([e,r])=>[i(e),i(r)])),n=[{[u]:t},e];return a.set(r,n),n}if(r instanceof Set){const t=[...r].map((e=>i(e))),n=[{[f]:t},e];return a.set(r,n),n}const l=function(e){return null!=e&&(Symbol.asyncIterator in e||Symbol.iterator in e)&&"function"==typeof e.next}(r);if(c(r)||l){const t={};for(const e of Object.keys(r))t[e]=i(r[e]);l&&(t.next??=i(r.next.bind(r)),t.return??=i(r.return.bind(r)),t.throw??=i(r.throw.bind(r)),t[m]=!0);const n=[t,e];return a.set(r,n),n}}if("function"==typeof r){const e=d.functions?.add(r);if(null==e)return[e];const t=[{[l]:e}];return a.set(r,t),t}const I=[r];return a.set(r,I),I}function n(e,t,s,o=!1){const{api:i,decode:d}=t;if(!o&&r)return r(e,d,s);if("object"==typeof e){if(null==e)return e;if(Array.isArray(e))return e.map((e=>n(e,t,s)));if(E in e)return new RegExp(...e[E]);if(p in e)return new URL(e[p]);if(h in e)return new Date(e[h]);if(u in e)return new Map(e[u].map((([e,r])=>[n(e,t,s),n(r,t,s)])));if(f in e)return new Set(e[f].map((e=>n(e,t,s))));if(l in e){const r=e[l],t=i.functions?.get(r);if(s&&a(t))for(const e of s)e.add(t);return t}if(!c(e))return e;const r={};for(const o of Object.keys(e))o===m?r[Symbol.asyncIterator]=()=>r:r[o]=n(e[o],t,s);return r}return e}}const $=0,R=1,I=2,L=3,v=5,N=6,w=7,g=8;function O(e,{expose:s,callable:o,signal:c,uuid:l=S,encoder:u=d()}={}){let f=!1;const p=new Map,h=new Map,E=new Map,m=new Map;if(s)for(const e of Object.keys(s)){const r=s[e];"function"==typeof r&&p.set(e,r)}const O=new Map,T=function(e,r,t){let n;if(null==r){if("function"!=typeof Proxy)throw new Error("You must pass an array of callable methods in environments without Proxies.");const r=new Map;n=new Proxy({},{get(n,s){if("then"===s)return;if("_requestMethods"===s)return t?._requestMethods;if(r.has(s))return r.get(s);const o=e(s);return r.set(s,o),o}})}else{n={};for(const t of r)Object.defineProperty(n,t,{value:e(t),writable:!1,configurable:!0,enumerable:!0})}return n}((function(e){return(...r)=>{try{if(f)throw new A;if("string"!=typeof e&&"number"!=typeof e)throw new Error(`Canâ€™t call a symbol method on a thread: ${e.toString()}`);if("hasCapability"===e){const e=r[0],t=l(),n=C(t);return b(w,[t,e]),n}const t=l(),n=C(t),[s,o]=u.encode(r,y);return b($,[t,e,s],o),n}catch(e){return Promise.reject(e)}}}),o,{_requestMethods:async function(){const e=l(),r=C(e);return b(g,[e]),r}}),y={functions:{add(e){let r=h.get(e);return null==r&&(r=l(),h.set(e,r),E.set(r,e)),r},get(e){let s=m.get(e);if(s)return s;let o=0,i=!1;return s=(...r)=>{if(i)throw new Error("You attempted to call a function that was already released.");if(!m.has(e))throw new Error("You attempted to call a function that was already revoked.");const[t,n]=u.encode(r,y),s=l(),o=C(s);return b(v,[s,e,t],n),o},Object.defineProperties(s,{[t]:{value:()=>{o-=1,0===o&&(i=!0,m.delete(e),b(L,[e]))},writable:!1},[r]:{value:()=>{o+=1},writable:!1},[n]:{value:new Set,writable:!1}}),m.set(e,s),s}}},P=()=>{if(!f){for(const e of O.keys())M(e,new A);f=!0,p.clear(),O.clear(),h.clear(),E.clear(),m.clear()}};return c?.addEventListener("abort",(()=>{b(I,[]),P()}),{once:!0}),e.listen((async function(e){if(!Array.isArray(e)||"number"!=typeof e[0]||null!=e[1]&&!Array.isArray(e[1]))return;const r=e;switch(r[0]){case I:P();break;case $:{const e=new i,[t,n,s]=r[1],o=p.get(n);try{if(null==o)throw new Error(`No '${n}' method is exposed on this endpoint`);const r=await o(...u.decode(s,y,[e])),[i,a]=u.encode(r,y);b(R,[t,void 0,i],a)}catch(e){const{name:r,message:n,stack:s}=e;b(R,[t,{name:r,message:n,stack:s}])}finally{e.release()}break}case R:M(...r[1]);break;case L:{const[e]=r[1],t=E.get(e);t&&(E.delete(e),h.delete(t));break}case N:M(...r[1]);break;case v:{const[e,t,s]=r[1],o=new i;try{const r=E.get(t);if(null==r)throw new Error("You attempted to call a function that was already released.");const i=await r(...u.decode(s,y,a(r)?[...r[n],o]:[o])),[c,l]=u.encode(i,y);b(N,[e,void 0,c],l)}catch(r){const{name:t,message:n,stack:s}=r;b(N,[e,{name:t,message:n,stack:s}])}finally{o.release()}break}case w:{const[e,t]=r[1],n=p.has(t);b(R,[e,void 0,u.encode(n,y)[0]]);break}case g:{const[e]=r[1],t=Array.from(p.keys());b(R,[e,void 0,u.encode(t,y)[0]]);break}}}),{signal:c}),T;function b(r,t,n){f||e.send([r,t],n)}function C(e){const r=new Promise(((r,t)=>{O.set(e,((e,n,s)=>{if(null==n)r(u.decode(s,y));else{const e=new Error;Object.assign(e,n),t(e)}}))}));return Object.defineProperty(r,Symbol.asyncIterator,{async*value(){const e=await r;Object.defineProperty(e,Symbol.asyncIterator,{value:()=>e}),yield*e}}),r}function M(...e){const r=e[0],t=O.get(r);t&&(t(...e),O.delete(r))}}class A extends Error{constructor(){super("You attempted to call a function on a terminated thread.")}}function S(){return`${T()}-${T()}-${T()}-${T()}`}function T(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}class y extends AbortController{constructor(...e){super();const r=e.find((e=>e.aborted));if(r)this.abort(r.reason);else{const r=e=>this.abort(e.target.reason),t={signal:this.signal};for(const n of e)n.addEventListener("abort",r,t)}}}const P="quilt.threads.ping",b="quilt.threads.pong";var C,M,j,D,G,F,_,U,X,x,k,V,B,Y,q,H,W,z,Z,J,K,Q,ee,re,te,ne,se,oe,ie,ae,ce,le,ue,fe,pe,he,Ee,me,de,$e,Re,Ie,Le,ve,Ne,we,ge,Oe,Ae,Se,Te,ye,Pe,be,Ce,Me,je,De,Ge,Fe,_e,Ue,Xe,xe,ke,Ve,Be,Ye,qe,He,We,ze,Ze,Je,Ke,Qe,er,rr,tr,nr,sr,or,ir,ar,cr,lr,ur,fr,pr,hr={exports:{}};function Er(){if(M)return C;M=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return C={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}function mr(){if(D)return j;D=1;const e="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return j=e}function dr(){return G||(G=1,function(e,r){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=Er(),o=mr(),i=(r=e.exports={}).re=[],a=r.safeRe=[],c=r.src=[],l=r.t={};let u=0;const f="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",s],[f,n]],h=(e,r,t)=>{const n=(e=>{for(const[r,t]of p)e=e.split(`${r}*`).join(`${r}{0,${t}}`).split(`${r}+`).join(`${r}{1,${t}}`);return e})(r),s=u++;o(e,s,r),l[e]=s,c[s]=r,i[s]=new RegExp(r,t?"g":void 0),a[s]=new RegExp(n,t?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),h("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?`+`(?:${c[l.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("COERCERTLFULL",c[l.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(hr,hr.exports)),hr.exports}function $r(){if(_)return F;_=1;const e=Object.freeze({loose:!0}),r=Object.freeze({});return F=t=>t?"object"!=typeof t?e:t:r}function Rr(){if(X)return U;X=1;const e=/^[0-9]+$/,r=(r,t)=>{const n=e.test(r),s=e.test(t);return n&&s&&(r=+r,t=+t),r===t?0:n&&!s?-1:s&&!n?1:r<t?-1:1};return U={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}}function Ir(){if(k)return x;k=1;const e=mr(),{MAX_LENGTH:r,MAX_SAFE_INTEGER:t}=Er(),{safeRe:n,t:s}=dr(),o=$r(),{compareIdentifiers:i}=Rr();class a{constructor(i,c){if(c=o(c),i instanceof a){if(i.loose===!!c.loose&&i.includePrerelease===!!c.includePrerelease)return i;i=i.version}else if("string"!=typeof i)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof i}".`);if(i.length>r)throw new TypeError(`version is longer than ${r} characters`);e("SemVer",i,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const l=i.trim().match(c.loose?n[s.LOOSE]:n[s.FULL]);if(!l)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+l[1],this.minor=+l[2],this.patch=+l[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");l[4]?this.prerelease=l[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const r=+e;if(r>=0&&r<t)return r}return e})):this.prerelease=[],this.build=l[5]?l[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(e("SemVer.compare",this.version,this.options,r),!(r instanceof a)){if("string"==typeof r&&r===this.version)return 0;r=new a(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(e){return e instanceof a||(e=new a(e,this.options)),i(this.major,e.major)||i(this.minor,e.minor)||i(this.patch,e.patch)}comparePre(r){if(r instanceof a||(r=new a(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],s=r.prerelease[t];if(e("prerelease compare",t,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return i(n,s)}while(++t)}compareBuild(r){r instanceof a||(r=new a(r,this.options));let t=0;do{const n=this.build[t],s=r.build[t];if(e("build compare",t,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return i(n,s)}while(++t)}inc(e,r,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,t),this.inc("pre",r,t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",r,t),this.inc("pre",r,t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(t)?1:0;if(!r&&!1===t)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(r===this.prerelease.join(".")&&!1===t)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(r){let n=[r,e];!1===t&&(n=[r]),0===i(this.prerelease[0],r)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return x=a}function Lr(){if(B)return V;B=1;const e=Ir();return V=(r,t,n=!1)=>{if(r instanceof e)return r;try{return new e(r,t)}catch(e){if(!n)return null;throw e}}}function vr(){if(ce)return ae;ce=1;const e=Ir();return ae=(r,t,n)=>new e(r,n).compare(new e(t,n))}function Nr(){if(Ee)return he;Ee=1;const e=Ir();return he=(r,t,n)=>{const s=new e(r,n),o=new e(t,n);return s.compare(o)||s.compareBuild(o)}}function wr(){if(Le)return Ie;Le=1;const e=vr();return Ie=(r,t,n)=>e(r,t,n)>0}function gr(){if(Ne)return ve;Ne=1;const e=vr();return ve=(r,t,n)=>e(r,t,n)<0}function Or(){if(ge)return we;ge=1;const e=vr();return we=(r,t,n)=>0===e(r,t,n)}function Ar(){if(Ae)return Oe;Ae=1;const e=vr();return Oe=(r,t,n)=>0!==e(r,t,n)}function Sr(){if(Te)return Se;Te=1;const e=vr();return Se=(r,t,n)=>e(r,t,n)>=0}function Tr(){if(Pe)return ye;Pe=1;const e=vr();return ye=(r,t,n)=>e(r,t,n)<=0}function yr(){if(Ce)return be;Ce=1;const e=Or(),r=Ar(),t=wr(),n=Sr(),s=gr(),o=Tr();return be=(i,a,c,l)=>{switch(a){case"===":return"object"==typeof i&&(i=i.version),"object"==typeof c&&(c=c.version),i===c;case"!==":return"object"==typeof i&&(i=i.version),"object"==typeof c&&(c=c.version),i!==c;case"":case"=":case"==":return e(i,c,l);case"!=":return r(i,c,l);case">":return t(i,c,l);case">=":return n(i,c,l);case"<":return s(i,c,l);case"<=":return o(i,c,l);default:throw new TypeError(`Invalid operator: ${a}`)}}}function Pr(){if(_e)return Fe;_e=1;class e{constructor(r,s){if(s=t(s),r instanceof e)return r.loose===!!s.loose&&r.includePrerelease===!!s.includePrerelease?r:new e(r.raw,s);if(r instanceof n)return this.raw=r.value,this.set=[[r]],this.format(),this;if(this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease,this.raw=r.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!h(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&E(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&p))+":"+e,o=r.get(t);if(o)return o;const E=this.options.loose,m=E?i[a.HYPHENRANGELOOSE]:i[a.HYPHENRANGE];e=e.replace(m,A(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(i[a.COMPARATORTRIM],c),s("comparator trim",e),e=e.replace(i[a.TILDETRIM],l),s("tilde trim",e),e=e.replace(i[a.CARETTRIM],u),s("caret trim",e);let $=e.split(" ").map((e=>d(e,this.options))).join(" ").split(/\s+/).map((e=>O(e,this.options)));E&&($=$.filter((e=>(s("loose invalid filter",e,this.options),!!e.match(i[a.COMPARATORLOOSE]))))),s("range list",$);const R=new Map,I=$.map((e=>new n(e,this.options)));for(const e of I){if(h(e))return[e];R.set(e.value,e)}R.size>1&&R.has("")&&R.delete("");const L=[...R.values()];return r.set(t,L),L}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>m(e,t)&&r.set.some((r=>m(r,t)&&e.every((e=>r.every((r=>e.intersects(r,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new o(e,this.options)}catch(e){return!1}for(let r=0;r<this.set.length;r++)if(S(this.set[r],e,this.options))return!0;return!1}}Fe=e;const r=new(Ge?De:(Ge=1,De=class{constructor(){this.max=1e3,this.map=new Map}get(e){const r=this.map.get(e);return void 0===r?void 0:(this.map.delete(e),this.map.set(e,r),r)}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&void 0!==r){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,r)}return this}})),t=$r(),n=br(),s=mr(),o=Ir(),{safeRe:i,t:a,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:u}=dr(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:p}=Er(),h=e=>"<0.0.0-0"===e.value,E=e=>""===e.value,m=(e,r)=>{let t=!0;const n=e.slice();let s=n.pop();for(;t&&n.length;)t=n.every((e=>s.intersects(e,r))),s=n.pop();return t},d=(e,r)=>(s("comp",e,r),e=L(e,r),s("caret",e),e=R(e,r),s("tildes",e),e=N(e,r),s("xrange",e),e=g(e,r),s("stars",e),e),$=e=>!e||"x"===e.toLowerCase()||"*"===e,R=(e,r)=>e.trim().split(/\s+/).map((e=>I(e,r))).join(" "),I=(e,r)=>{const t=r.loose?i[a.TILDELOOSE]:i[a.TILDE];return e.replace(t,((r,t,n,o,i)=>{let a;return s("tilde",e,r,t,n,o,i),$(t)?a="":$(n)?a=`>=${t}.0.0 <${+t+1}.0.0-0`:$(o)?a=`>=${t}.${n}.0 <${t}.${+n+1}.0-0`:i?(s("replaceTilde pr",i),a=`>=${t}.${n}.${o}-${i} <${t}.${+n+1}.0-0`):a=`>=${t}.${n}.${o} <${t}.${+n+1}.0-0`,s("tilde return",a),a}))},L=(e,r)=>e.trim().split(/\s+/).map((e=>v(e,r))).join(" "),v=(e,r)=>{s("caret",e,r);const t=r.loose?i[a.CARETLOOSE]:i[a.CARET],n=r.includePrerelease?"-0":"";return e.replace(t,((r,t,o,i,a)=>{let c;return s("caret",e,r,t,o,i,a),$(t)?c="":$(o)?c=`>=${t}.0.0${n} <${+t+1}.0.0-0`:$(i)?c="0"===t?`>=${t}.${o}.0${n} <${t}.${+o+1}.0-0`:`>=${t}.${o}.0${n} <${+t+1}.0.0-0`:a?(s("replaceCaret pr",a),c="0"===t?"0"===o?`>=${t}.${o}.${i}-${a} <${t}.${o}.${+i+1}-0`:`>=${t}.${o}.${i}-${a} <${t}.${+o+1}.0-0`:`>=${t}.${o}.${i}-${a} <${+t+1}.0.0-0`):(s("no pr"),c="0"===t?"0"===o?`>=${t}.${o}.${i}${n} <${t}.${o}.${+i+1}-0`:`>=${t}.${o}.${i}${n} <${t}.${+o+1}.0-0`:`>=${t}.${o}.${i} <${+t+1}.0.0-0`),s("caret return",c),c}))},N=(e,r)=>(s("replaceXRanges",e,r),e.split(/\s+/).map((e=>w(e,r))).join(" ")),w=(e,r)=>{e=e.trim();const t=r.loose?i[a.XRANGELOOSE]:i[a.XRANGE];return e.replace(t,((t,n,o,i,a,c)=>{s("xRange",e,t,n,o,i,a,c);const l=$(o),u=l||$(i),f=u||$(a),p=f;return"="===n&&p&&(n=""),c=r.includePrerelease?"-0":"",l?t=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(u&&(i=0),a=0,">"===n?(n=">=",u?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),"<"===n&&(c="-0"),t=`${n+o}.${i}.${a}${c}`):u?t=`>=${o}.0.0${c} <${+o+1}.0.0-0`:f&&(t=`>=${o}.${i}.0${c} <${o}.${+i+1}.0-0`),s("xRange return",t),t}))},g=(e,r)=>(s("replaceStars",e,r),e.trim().replace(i[a.STAR],"")),O=(e,r)=>(s("replaceGTE0",e,r),e.trim().replace(i[r.includePrerelease?a.GTE0PRE:a.GTE0],"")),A=e=>(r,t,n,s,o,i,a,c,l,u,f,p)=>`${t=$(n)?"":$(s)?`>=${n}.0.0${e?"-0":""}`:$(o)?`>=${n}.${s}.0${e?"-0":""}`:i?`>=${t}`:`>=${t}${e?"-0":""}`} ${c=$(l)?"":$(u)?`<${+l+1}.0.0-0`:$(f)?`<${l}.${+u+1}.0-0`:p?`<=${l}.${u}.${f}-${p}`:e?`<${l}.${u}.${+f+1}-0`:`<=${c}`}`.trim(),S=(e,r,t)=>{for(let t=0;t<e.length;t++)if(!e[t].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let t=0;t<e.length;t++)if(s(e[t].semver),e[t].semver!==n.ANY&&e[t].semver.prerelease.length>0){const n=e[t].semver;if(n.major===r.major&&n.minor===r.minor&&n.patch===r.patch)return!0}return!1}return!0};return Fe}function br(){if(Xe)return Ue;Xe=1;const e=Symbol("SemVer ANY");class r{static get ANY(){return e}constructor(n,s){if(s=t(s),n instanceof r){if(n.loose===!!s.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),i("comparator",n,s),this.options=s,this.loose=!!s.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(r){const t=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],o=r.match(t);if(!o)throw new TypeError(`Invalid comparator: ${r}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new a(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(r){if(i("Comparator.test",r,this.options.loose),this.semver===e||r===e)return!0;if("string"==typeof r)try{r=new a(r,this.options)}catch(e){return!1}return o(r,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof r))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(e.value,n).test(this.value):""===e.operator?""===e.value||new c(this.value,n).test(e.semver):(!(n=t(n)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(o(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(o(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}Ue=r;const t=$r(),{safeRe:n,t:s}=dr(),o=yr(),i=mr(),a=Ir(),c=Pr();return Ue}function Cr(){if(ke)return xe;ke=1;const e=Pr();return xe=(r,t,n)=>{try{t=new e(t,n)}catch(e){return!1}return t.test(r)},xe}function Mr(){if(Ke)return Je;Ke=1;const e=Pr();return Je=(r,t)=>{try{return new e(r,t).range||"*"}catch(e){return null}},Je}function jr(){if(er)return Qe;er=1;const e=Ir(),r=br(),{ANY:t}=r,n=Pr(),s=Cr(),o=wr(),i=gr(),a=Tr(),c=Sr();return Qe=(l,u,f,p)=>{let h,E,m,d,$;switch(l=new e(l,p),u=new n(u,p),f){case">":h=o,E=a,m=i,d=">",$=">=";break;case"<":h=i,E=c,m=o,d="<",$="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(l,u,p))return!1;for(let e=0;e<u.set.length;++e){const n=u.set[e];let s=null,o=null;if(n.forEach((e=>{e.semver===t&&(e=new r(">=0.0.0")),s=s||e,o=o||e,h(e.semver,s.semver,p)?s=e:m(e.semver,o.semver,p)&&(o=e)})),s.operator===d||s.operator===$)return!1;if((!o.operator||o.operator===d)&&E(l,o.semver))return!1;if(o.operator===$&&m(l,o.semver))return!1}return!0},Qe}var Dr=function(){if(pr)return fr;pr=1;const e=dr(),r=Er(),t=Ir(),n=Rr(),s=Lr(),o=function(){if(q)return Y;q=1;const e=Lr();return Y=(r,t)=>{const n=e(r,t);return n?n.version:null}}(),i=function(){if(W)return H;W=1;const e=Lr();return H=(r,t)=>{const n=e(r.trim().replace(/^[=v]+/,""),t);return n?n.version:null}}(),a=function(){if(Z)return z;Z=1;const e=Ir();return z=(r,t,n,s,o)=>{"string"==typeof n&&(o=s,s=n,n=void 0);try{return new e(r instanceof e?r.version:r,n).inc(t,s,o).version}catch(e){return null}}}(),c=function(){if(K)return J;K=1;const e=Lr();return J=(r,t)=>{const n=e(r,null,!0),s=e(t,null,!0),o=n.compare(s);if(0===o)return null;const i=o>0,a=i?n:s,c=i?s:n,l=!!a.prerelease.length;if(c.prerelease.length&&!l)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const u=l?"pre":"";return n.major!==s.major?u+"major":n.minor!==s.minor?u+"minor":n.patch!==s.patch?u+"patch":"prerelease"}}(),l=function(){if(ee)return Q;ee=1;const e=Ir();return Q=(r,t)=>new e(r,t).major}(),u=function(){if(te)return re;te=1;const e=Ir();return re=(r,t)=>new e(r,t).minor}(),f=function(){if(se)return ne;se=1;const e=Ir();return ne=(r,t)=>new e(r,t).patch}(),p=function(){if(ie)return oe;ie=1;const e=Lr();return oe=(r,t)=>{const n=e(r,t);return n&&n.prerelease.length?n.prerelease:null}}(),h=vr(),E=function(){if(ue)return le;ue=1;const e=vr();return le=(r,t,n)=>e(t,r,n)}(),m=function(){if(pe)return fe;pe=1;const e=vr();return fe=(r,t)=>e(r,t,!0)}(),d=Nr(),$=function(){if(de)return me;de=1;const e=Nr();return me=(r,t)=>r.sort(((r,n)=>e(r,n,t)))}(),R=function(){if(Re)return $e;Re=1;const e=Nr();return $e=(r,t)=>r.sort(((r,n)=>e(n,r,t)))}(),I=wr(),L=gr(),v=Or(),N=Ar(),w=Sr(),g=Tr(),O=yr(),A=function(){if(je)return Me;je=1;const e=Ir(),r=Lr(),{safeRe:t,t:n}=dr();return Me=(s,o)=>{if(s instanceof e)return s;if("number"==typeof s&&(s=String(s)),"string"!=typeof s)return null;let i=null;if((o=o||{}).rtl){const e=o.includePrerelease?t[n.COERCERTLFULL]:t[n.COERCERTL];let r;for(;(r=e.exec(s))&&(!i||i.index+i[0].length!==s.length);)i&&r.index+r[0].length===i.index+i[0].length||(i=r),e.lastIndex=r.index+r[1].length+r[2].length;e.lastIndex=-1}else i=s.match(o.includePrerelease?t[n.COERCEFULL]:t[n.COERCE]);if(null===i)return null;const a=i[2],c=i[3]||"0",l=i[4]||"0",u=o.includePrerelease&&i[5]?`-${i[5]}`:"",f=o.includePrerelease&&i[6]?`+${i[6]}`:"";return r(`${a}.${c}.${l}${u}${f}`,o)}}(),S=br(),T=Pr(),y=Cr(),P=function(){if(Be)return Ve;Be=1;const e=Pr();return Ve=(r,t)=>new e(r,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" "))),Ve}(),b=function(){if(qe)return Ye;qe=1;const e=Ir(),r=Pr();return Ye=(t,n,s)=>{let o=null,i=null,a=null;try{a=new r(n,s)}catch(e){return null}return t.forEach((r=>{a.test(r)&&(o&&-1!==i.compare(r)||(o=r,i=new e(o,s)))})),o},Ye}(),C=function(){if(We)return He;We=1;const e=Ir(),r=Pr();return He=(t,n,s)=>{let o=null,i=null,a=null;try{a=new r(n,s)}catch(e){return null}return t.forEach((r=>{a.test(r)&&(o&&1!==i.compare(r)||(o=r,i=new e(o,s)))})),o},He}(),M=function(){if(Ze)return ze;Ze=1;const e=Ir(),r=Pr(),t=wr();return ze=(n,s)=>{n=new r(n,s);let o=new e("0.0.0");if(n.test(o))return o;if(o=new e("0.0.0-0"),n.test(o))return o;o=null;for(let r=0;r<n.set.length;++r){const s=n.set[r];let i=null;s.forEach((r=>{const n=new e(r.semver.version);switch(r.operator){case">":0===n.prerelease.length?n.patch++:n.prerelease.push(0),n.raw=n.format();case"":case">=":i&&!t(n,i)||(i=n);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${r.operator}`)}})),!i||o&&!t(o,i)||(o=i)}return o&&n.test(o)?o:null},ze}(),j=Mr(),D=jr(),G=function(){if(tr)return rr;tr=1;const e=jr();return rr=(r,t,n)=>e(r,t,">",n),rr}(),F=function(){if(sr)return nr;sr=1;const e=jr();return nr=(r,t,n)=>e(r,t,"<",n),nr}(),_=function(){if(ir)return or;ir=1;const e=Pr();return or=(r,t,n)=>(r=new e(r,n),t=new e(t,n),r.intersects(t,n))}(),U=function(){if(cr)return ar;cr=1;const e=Cr(),r=vr();return ar=(t,n,s)=>{const o=[];let i=null,a=null;const c=t.sort(((e,t)=>r(e,t,s)));for(const r of c)e(r,n,s)?(a=r,i||(i=r)):(a&&o.push([i,a]),a=null,i=null);i&&o.push([i,null]);const l=[];for(const[e,r]of o)e===r?l.push(e):r||e!==c[0]?r?e===c[0]?l.push(`<=${r}`):l.push(`${e} - ${r}`):l.push(`>=${e}`):l.push("*");const u=l.join(" || "),f="string"==typeof n.raw?n.raw:String(n);return u.length<f.length?u:n},ar}(),X=function(){if(ur)return lr;ur=1;const e=Pr(),r=br(),{ANY:t}=r,n=Cr(),s=vr(),o=[new r(">=0.0.0-0")],i=[new r(">=0.0.0")],a=(e,r,a)=>{if(e===r)return!0;if(1===e.length&&e[0].semver===t){if(1===r.length&&r[0].semver===t)return!0;e=a.includePrerelease?o:i}if(1===r.length&&r[0].semver===t){if(a.includePrerelease)return!0;r=i}const u=new Set;let f,p,h,E,m,d,$;for(const r of e)">"===r.operator||">="===r.operator?f=c(f,r,a):"<"===r.operator||"<="===r.operator?p=l(p,r,a):u.add(r.semver);if(u.size>1)return null;if(f&&p){if(h=s(f.semver,p.semver,a),h>0)return null;if(0===h&&(">="!==f.operator||"<="!==p.operator))return null}for(const e of u){if(f&&!n(e,String(f),a))return null;if(p&&!n(e,String(p),a))return null;for(const t of r)if(!n(e,String(t),a))return!1;return!0}let R=!(!p||a.includePrerelease||!p.semver.prerelease.length)&&p.semver,I=!(!f||a.includePrerelease||!f.semver.prerelease.length)&&f.semver;R&&1===R.prerelease.length&&"<"===p.operator&&0===R.prerelease[0]&&(R=!1);for(const e of r){if($=$||">"===e.operator||">="===e.operator,d=d||"<"===e.operator||"<="===e.operator,f)if(I&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===I.major&&e.semver.minor===I.minor&&e.semver.patch===I.patch&&(I=!1),">"===e.operator||">="===e.operator){if(E=c(f,e,a),E===e&&E!==f)return!1}else if(">="===f.operator&&!n(f.semver,String(e),a))return!1;if(p)if(R&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===R.major&&e.semver.minor===R.minor&&e.semver.patch===R.patch&&(R=!1),"<"===e.operator||"<="===e.operator){if(m=l(p,e,a),m===e&&m!==p)return!1}else if("<="===p.operator&&!n(p.semver,String(e),a))return!1;if(!e.operator&&(p||f)&&0!==h)return!1}return!(f&&d&&!p&&0!==h||p&&$&&!f&&0!==h||I||R)},c=(e,r,t)=>{if(!e)return r;const n=s(e.semver,r.semver,t);return n>0?e:n<0||">"===r.operator&&">="===e.operator?r:e},l=(e,r,t)=>{if(!e)return r;const n=s(e.semver,r.semver,t);return n<0?e:n>0||"<"===r.operator&&"<="===e.operator?r:e};return lr=(r,t,n={})=>{if(r===t)return!0;r=new e(r,n),t=new e(t,n);let s=!1;e:for(const e of r.set){for(const r of t.set){const t=a(e,r,n);if(s=s||null!==t,t)continue e}if(s)return!1}return!0}}();return fr={parse:s,valid:o,clean:i,inc:a,diff:c,major:l,minor:u,patch:f,prerelease:p,compare:h,rcompare:E,compareLoose:m,compareBuild:d,sort:$,rsort:R,gt:I,lt:L,eq:v,neq:N,gte:w,lte:g,cmp:O,coerce:A,Comparator:S,Range:T,satisfies:y,toComparators:P,maxSatisfying:b,minSatisfying:C,minVersion:M,validRange:j,outside:D,gtr:G,ltr:F,intersects:_,simplifyRange:U,subset:X,SemVer:t,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:r.SEMVER_SPEC_VERSION,RELEASE_TYPES:r.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers}}();const Gr=["0.8.0","0.9.0"];function Fr(e,r){const t=Dr.coerce(e),n=Dr.coerce(r);return!(!t||!n)&&Dr.gte(t,n)}return e.createClient=async function(e,r){const t=function(e,{targetOrigin:r="*",...t}={}){let n=!1;const s=function(t,n){e.contentWindow?.postMessage(t,r,n)},o=new Promise((r=>{const o=t.signal?new y(t.signal):new AbortController;window.addEventListener("message",(t=>{t.source===e.contentWindow&&t.data===b&&(n=!0,o.abort(),r())}),{signal:o.signal}),o.signal.addEventListener("abort",(()=>{r()}),{once:!0}),s(P)}));return O({send:(e,r)=>n?s(e,r):o.then((()=>{if(n)return s(e,r)})),listen(r,{signal:t}){self.addEventListener("message",(t=>{t.source===e.contentWindow&&t.data!==b&&r(t.data)}),{signal:t})}},t)}(e,{expose:r});return await async function(e){const r=await e._requestMethods(),t={};for(const n of r)t[n]=e[n];const n=await e.getVersion(),s={};for(const e of Gr)Fr(n,e)&&(s[e]=t);return s}(t)},e}({});
