(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2342],{68109:function(e,t,n){Promise.resolve().then(n.bind(n,21499))},21499:function(e,t,n){"use strict";n.r(t),n.d(t,{Page:function(){return eY}});var a=n(36164),r=n(3546),i=n(54767),s=n(28445),o=n(84837),l=n(1853),c=n(38370),d=n(78501),u=n(12978),m=n(2578),f=n(40055),x=n(21808),h=n(93877),p=n(18500),g=n(9010),v=n(24449),j=n(16784),b=n(98454),y=n(44645),N=n(96274),w=n(11634),S=n(70410),C=n(73492),A=n(31458),k=n(81565),I=n(53538),D=n(57830),P=n(3448),Z=n(72657),_=n(30601),R=n(94779),z=n(6230),F=n(37034),M=n(52569),O=n(43240);let T=(0,O.BX)("\n  subscription createThreadToPageRun($input: CreateThreadToPageRunInput!) {\n    createThreadToPageRun(input: $input) {\n      __typename\n      ... on PageCreated {\n        id\n        authorId\n        title\n        debugData {\n          __typename\n          generatePageTitleMessages {\n            role\n            content\n          }\n        }\n      }\n      ... on PageContentDelta {\n        delta\n      }\n      ... on PageContentCompleted {\n        id\n      }\n      ... on PageSectionsCreated {\n        sections {\n          id\n          position\n          title\n        }\n        debugData {\n          __typename\n          generateSectionTitlesMessages {\n            role\n            content\n          }\n        }\n      }\n      ... on PageSectionAttachmentCodeFileList {\n        id\n        codeFileList {\n          __typename\n          fileList\n          truncated\n        }\n      }\n      ... on PageSectionAttachmentCode {\n        id\n        codes {\n          code {\n            __typename\n            gitUrl\n            commit\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n        debugData {\n          sourceId\n          query\n        }\n      }\n      ... on PageSectionAttachmentDoc {\n        id\n        doc {\n          doc {\n            __typename\n            ... on AttachmentWebDoc {\n              title\n              link\n              content\n            }\n            ... on AttachmentIssueDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              closed\n            }\n            ... on AttachmentPullDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              merged\n            }\n            ... on AttachmentCommitDoc {\n              sha\n              message\n              author {\n                id\n                email\n                name\n              }\n              authorAt\n            }\n            ... on AttachmentPageDoc {\n              link\n              title\n              content\n            }\n          }\n          score\n        }\n        debugData {\n          sourceIds\n          query\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n        debugData {\n          __typename\n          generateSectionContentMessages {\n            role\n            content\n          }\n        }\n      }\n      ... on PageCompleted {\n        id\n      }\n    }\n  }\n"),L=(0,O.BX)("\n  subscription createPageRun($input: CreatePageRunInput!) {\n    createPageRun(input: $input) {\n      __typename\n      ... on PageCreated {\n        id\n        authorId\n        title\n        debugData {\n          __typename\n          generatePageTitleMessages {\n            role\n            content\n          }\n        }\n      }\n      ... on PageContentDelta {\n        delta\n      }\n      ... on PageContentCompleted {\n        id\n        debugData {\n          __typename\n          generatePageContentMessages {\n            role\n            content\n          }\n        }\n      }\n      ... on PageSectionsCreated {\n        sections {\n          id\n          position\n          title\n        }\n        debugData {\n          __typename\n          generateSectionTitlesMessages {\n            role\n            content\n          }\n        }\n      }\n      ... on PageSectionAttachmentCodeFileList {\n        id\n        codeFileList {\n          __typename\n          fileList\n          truncated\n        }\n      }\n      ... on PageSectionAttachmentCode {\n        id\n        codes {\n          code {\n            __typename\n            gitUrl\n            commit\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n        debugData {\n          sourceId\n          query\n        }\n      }\n      ... on PageSectionAttachmentDoc {\n        id\n        doc {\n          doc {\n            __typename\n            ... on AttachmentWebDoc {\n              title\n              link\n              content\n            }\n            ... on AttachmentIssueDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              closed\n            }\n            ... on AttachmentPullDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              merged\n            }\n            ... on AttachmentCommitDoc {\n              sha\n              message\n              author {\n                id\n                email\n                name\n              }\n              authorAt\n            }\n            ... on AttachmentPageDoc {\n              link\n              title\n              content\n            }\n          }\n          score\n        }\n        debugData {\n          sourceIds\n          query\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n        debugData {\n          __typename\n          generateSectionContentMessages {\n            role\n            content\n          }\n        }\n      }\n      ... on PageCompleted {\n        id\n      }\n    }\n  }\n"),E=(0,O.BX)("\n  subscription createPageSectionRun($input: CreatePageSectionRunInput!) {\n    createPageSectionRun(input: $input) {\n      __typename\n      ... on PageSectionCreated {\n        id\n        title\n        position\n        debugData {\n          __typename\n          generateSectionTitlesMessages {\n            role\n            content\n          }\n        }\n      }\n      ... on PageSectionAttachmentCodeFileList {\n        id\n        codeFileList {\n          fileList\n          truncated\n        }\n      }\n      ... on PageSectionAttachmentCode {\n        id\n        codes {\n          code {\n            __typename\n            gitUrl\n            commit\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n        debugData {\n          sourceId\n          query\n        }\n      }\n      ... on PageSectionAttachmentDoc {\n        id\n        doc {\n          doc {\n            __typename\n            ... on AttachmentWebDoc {\n              title\n              link\n              content\n            }\n            ... on AttachmentIssueDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              closed\n            }\n            ... on AttachmentPullDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              merged\n            }\n            ... on AttachmentCommitDoc {\n              sha\n              message\n              author {\n                id\n                email\n                name\n              }\n              authorAt\n            }\n            ... on AttachmentPageDoc {\n              link\n              title\n              content\n            }\n          }\n          score\n        }\n        debugData {\n          sourceIds\n          query\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n        debugData {\n          __typename\n          generateSectionContentMessages {\n            role\n            content\n          }\n        }\n      }\n    }\n  }\n"),U=(0,O.BX)("\n  mutation DeletePageSection($sectionId: ID!) {\n    deletePageSection(sectionId: $sectionId)\n  }\n"),W=(0,O.BX)("\n  mutation movePageSection($id: ID!, $direction: MoveSectionDirection!) {\n    movePageSection(id: $id, direction: $direction)\n  }\n");var V=n(99092),$=n.n(V),B=n(70652),q=n.n(B),G=n(37266),H=n(69579),Q=n(11978),Y=n(28312),X=n(73460),K=n(63795),J=n(62202),ee=n(68172),et=n(61249),en=n(63743),ea=n(7449);let er=(0,r.createContext)({}),ei=(0,O.BX)("\n  mutation DeletePage($id: ID!) {\n    deletePage(id: $id)\n  }\n");function es(e){let{pageIdFromURL:t,streamingDone:n}=e,i=(0,Q.useRouter)(),{isPageOwner:s,mode:o,setMode:l,isLoading:c}=(0,r.useContext)(er),[d,u]=(0,r.useState)(!1),[f,x]=(0,r.useState)(!1),{copyToClipboard:h}=(0,Y.m)({}),p=(0,w.Db)(ei,{onCompleted(e){e.deletePage?i.replace("/"):(m.A.error("Failed to delete"),x(!1))},onError(e){m.A.error((null==e?void 0:e.message)||"Failed to delete"),x(!1)}}),g=e=>{e&&(0,G.wh)(),i.push("/")};return(0,a.jsxs)("header",{className:"relative flex h-16 w-full items-center justify-between border-b px-4 lg:px-10",children:[(0,a.jsx)("div",{className:"flex items-center gap-x-6",children:(0,a.jsxs)(A.z,{variant:"ghost",className:"-ml-1 pl-0 text-sm text-muted-foreground",onClick:()=>g(),children:[(0,a.jsx)(k.IconChevronLeft,{className:"mr-1 h-5 w-5"}),"Home"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s&&t?(0,a.jsx)(a.Fragment,{children:"edit"===o?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(A.z,{disabled:!n,onClick:e=>l("view"),children:"Done"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J.h_,{modal:!1,children:[(0,a.jsx)(J.$F,{asChild:!0,children:(0,a.jsx)(A.z,{size:"icon",variant:"ghost",children:(0,a.jsx)(k.IconMore,{})})}),(0,a.jsxs)(J.AW,{align:"end",children:[(0,a.jsxs)(J.Xi,{className:"cursor-pointer gap-2",onSelect:()=>{h(window.location.href)},children:[(0,a.jsx)(k.IconShare,{}),"Share"]}),n&&t&&s&&(0,a.jsxs)(J.Xi,{className:"cursor-pointer gap-2 !text-destructive",onSelect:()=>u(!0),children:[(0,a.jsx)(k.IconTrash,{}),"Delete Page"]})]})]}),(0,a.jsxs)(A.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal",onClick:()=>l("edit"),children:[(0,a.jsx)(k.IconEdit,{}),"Edit"]})]})}):null,(0,a.jsx)(ee.q,{children:(0,a.jsx)(en.T,{})}),(0,a.jsx)(et.L,{className:"mr-4"}),(0,a.jsx)(ea.Z,{showHome:!1,showSetting:!0,beforeRouteChange:()=>{(0,G.wh)()},children:(0,a.jsx)(M.SQ,{className:"h-10 w-10 border"})})]}),(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:c?(0,a.jsx)(K.C,{variant:"secondary",children:"Writing..."}):"edit"===o?(0,a.jsx)(K.C,{children:"Editing"}):null}),(0,a.jsx)(X.aR,{open:d,onOpenChange:u,children:(0,a.jsxs)(X._T,{children:[(0,a.jsxs)(X.fY,{children:[(0,a.jsx)(X.f$,{children:"Delete this page"}),(0,a.jsx)(X.yT,{children:"Are you sure you want to delete this page? This operation is not revertible."})]}),(0,a.jsxs)(X.xo,{children:[(0,a.jsx)(X.le,{children:"Cancel"}),(0,a.jsxs)(X.OL,{className:(0,A.d)({variant:"destructive"}),onClick:e=>{e.preventDefault(),x(!0),p({id:t}).then(e=>{var t;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.deletePage)?i.replace("/"):(m.A.error("Failed to delete"),x(!1))})},children:[f&&(0,a.jsx)(k.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, delete it"]})]})]})})]})}function eo(e){let{error:t,pageIdFromURL:n}=e;return t.message===x.ir?(0,a.jsx)(H.default,{}):(0,a.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,a.jsx)(es,{pageIdFromURL:n}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.IconFileSearch,{className:"h-6 w-6"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:"Something went wrong"})]}),(0,a.jsx)("div",{children:"Failed to fetch, please refresh the page"}),(0,a.jsx)(q(),{href:"/",onClick:G.wh,className:(0,C.cn)((0,A.d)(),"mt-4 gap-2"),children:(0,a.jsx)("span",{children:"Home"})})]})})]})}let el=e=>{let{sections:t}=e,{isLoading:n,pendingSectionIds:i}=(0,r.useContext)(er),[s,o]=(0,r.useState)(),l=(0,r.useRef)(null),c=(0,v.S)(e=>{o(e)},200);return(0,r.useEffect)(()=>{l.current=new IntersectionObserver(e=>{let t=e.filter(e=>e.isIntersecting).sort((e,t)=>e.boundingClientRect.top-t.boundingClientRect.top);if(t.length>0){let e=t[0];c.run(e.target.id)}},{root:null,rootMargin:"0px",threshold:.1});let e=document.querySelectorAll(".section-title");return e.forEach(e=>{var t;null===(t=l.current)||void 0===t||t.observe(e)}),()=>{var e;null===(e=l.current)||void 0===e||e.disconnect()}},[n,i]),(0,a.jsx)("nav",{className:"sticky right-0 top-0 p-4 pt-8",children:(0,a.jsx)("ul",{className:"flex flex-col space-y-1 border-l",children:null==t?void 0:t.map(e=>{let t=s===e.id;return(0,a.jsx)("li",{className:"relative -ml-px cursor-pointer",onClick:t=>{let n=document.getElementById(e.id);n&&n.scrollIntoView({behavior:"smooth",block:"start"})},children:(0,a.jsx)("div",{className:(0,C.cn)("truncate whitespace-nowrap pl-2 text-sm",{"text-foreground border-l border-foreground":t,"text-muted-foreground":!t}),children:e.title})},e.id)})})})};var ec=n(84381),ed=n(5493),eu=n(23782),em=n(4951),ef=n(98150),ex=n(82394),eh=n(75217);function ep(e){let{onSubmit:t}=e,{fetchingContextInfo:n,contextInfo:i}=(0,r.useContext)(er),{selectedRepository:s,onSelectRepository:o}=(0,em.Q)(),l=(0,r.useRef)(null),c=eu.Ry({titlePrompt:eu.Z_().trim()}),d=(0,ed.cI)({resolver:(0,ec.F)(c)}),u=d.watch("titlePrompt"),m=(0,r.useMemo)(()=>null==i?void 0:i.sources.filter(e=>(0,C.wO)(e.sourceKind)),[null==i?void 0:i.sources]),f=()=>{var e;null===(e=l.current)||void 0===e||e.focus()},x=async e=>{let n=await t({titlePrompt:e.titlePrompt.trim(),codeSourceId:null==s?void 0:s.id});n&&(0,w.zG)(d)(n)};return(0,a.jsx)(ef.l0,{...d,children:(0,a.jsxs)("form",{onSubmit:d.handleSubmit(x),children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsx)(ef.Wi,{control:d.control,name:"titlePrompt",render:e=>{let{field:{ref:t,...n}}=e;return(0,a.jsxs)(ef.xJ,{className:"flex-1",children:[(0,a.jsx)(ef.NI,{children:(0,a.jsx)(ex.I,{autoFocus:!0,className:"h-auto w-full border-none text-3xl font-semibold shadow-none outline-none focus-visible:ring-0",placeholder:"What is your page about?",autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",ref:e=>{t(e),l.current=e},...n})}),(0,a.jsx)(ef.zG,{})]})}}),(0,a.jsx)(A.z,{className:"h-auto w-auto px-2",type:"submit",disabled:!u,children:(0,a.jsx)(k.IconArrowRight,{})})]}),(0,a.jsx)("div",{className:"mt-4 pl-3",onClick:e=>f(),children:(0,a.jsx)(eh.v,{repos:m,isInitializing:n,value:null==s?void 0:s.sourceId,onChange:e=>{o(e),setTimeout(()=>{f()},10)},placeholder:"Select repository",showChevron:!0})}),(0,a.jsx)("div",{className:"my-2",children:(0,a.jsx)(ef.zG,{})})]})})}var eg=n(23455);function ev(e){let{onSubmit:t,disabled:n,className:i}=e,s=eu.Ry({title:eu.Z_().trim()}),o=(0,ed.cI)({resolver:(0,ec.F)(s)}),{formRef:l,onKeyDown:c}=function(){let e=(0,r.useRef)(null);return{formRef:e,onKeyDown:t=>{if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent.isComposing){var n;null===(n=e.current)||void 0===n||n.requestSubmit(),t.preventDefault()}}}}(),d=o.watch("title"),{isSubmitting:u}=o.formState,m=n||!d||u,f=async e=>{if(m)return;let n=e.title;t(n).then(e=>{e&&(0,w.zG)(o)(e)}),o.reset({title:""})};return(0,a.jsx)(ef.l0,{...o,children:(0,a.jsx)("form",{className:(0,C.cn)(i),onSubmit:o.handleSubmit(f),ref:l,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ef.Wi,{control:o.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsx)(ef.xJ,{className:"flex-1",children:(0,a.jsx)(ef.NI,{children:(0,a.jsx)(eg.Z,{draggable:!1,minRows:2,maxRows:6,className:"w-full rounded-lg border-2 bg-background p-4 pr-12 text-xl outline-ring",placeholder:"What is the section about?",onKeyDown:c,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",...t})})})}}),(0,a.jsx)(A.z,{size:"icon",className:"absolute right-4 top-1/2 z-10 h-7 w-7 -translate-y-1/2 rounded-full",type:"submit",disabled:m,children:(0,a.jsx)(k.IconPlus,{})})]})})})}var ej=n(22507);function eb(e){let{message:t,onCancel:n,onSubmit:r,inputClassName:i}=e,s=eu.Ry({content:eu.Z_().trim()}),o=(0,ed.cI)({resolver:(0,ec.F)(s),defaultValues:{content:t}}),{isSubmitting:l}=o.formState,c=async e=>{let t=await r(e.content);t&&(0,w.zG)(o)(t)};return(0,a.jsx)(ef.l0,{...o,children:(0,a.jsxs)("form",{onSubmit:o.handleSubmit(c),children:[(0,a.jsx)(ef.Wi,{control:o.control,name:"content",render:e=>{let{field:t}=e;return(0,a.jsxs)(ef.xJ,{children:[(0,a.jsx)(ef.NI,{children:(0,a.jsx)(eg.Z,{autoFocus:!0,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",minRows:2,maxRows:20,className:(0,C.cn)("w-full rounded-lg border bg-background p-4 outline-ring",i),...t})}),(0,a.jsx)(ef.zG,{})]})}}),(0,a.jsxs)("div",{className:"mb-3 mt-1 flex items-center justify-between gap-2 px-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(ef.zG,{})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.z,{type:"button",variant:"outline",onClick:n,className:"min-w-[2rem]",children:"Cancel"}),(0,a.jsxs)(A.z,{type:"submit",disabled:l,children:[l&&(0,a.jsx)(k.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})]})})}let ey=(0,O.BX)("\n  mutation updatePageContent($input: UpdatePageContentInput!) {\n    updatePageContent(input: $input)\n  }\n");function eN(e){var t,n;let{page:i,onUpdate:s}=e,{mode:o,isLoading:l,isPageOwner:c}=(0,r.useContext)(er),[d,u]=(0,r.useState)(!1),m=(0,w.Db)(ey),f=async e=>{var t;if(!i)return;let n=await m({input:{id:i.id,content:e}});if(null==n||null===(t=n.data)||void 0===t||!t.updatePageContent)return null==n?void 0:n.error;s(e),u(!1)};return(0,a.jsxs)("div",{children:[d?(0,a.jsx)(eb,{message:null!==(t=null==i?void 0:i.content)&&void 0!==t?t:"",onCancel:()=>u(!1),onSubmit:f}):(0,a.jsx)(ej.J,{message:null!==(n=null==i?void 0:i.content)&&void 0!==n?n:"",supportsOnApplyInEditorV2:!1}),c&&"edit"===o&&!l&&!d&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)(A.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",disabled:l,onClick:()=>{u(!0)},children:[(0,a.jsx)(k.IconEdit,{}),"Edit"]})})]})}let ew=(0,O.BX)("\n  mutation updatePageTitle($input: UpdatePageTitleInput!) {\n    updatePageTitle(input: $input)\n  }\n");function eS(e){var t;let{page:n,onUpdate:i,isGeneratingPageTitle:s}=e,{mode:o,isLoading:l}=(0,r.useContext)(er),[c,d]=(0,r.useState)(!1),u=(0,w.Db)(ew),m=async e=>{var t;if(!n)return;let a=await u({input:{id:n.id,title:e}});if(null==a||null===(t=a.data)||void 0===t||!t.updatePageTitle)return null==a?void 0:a.error;i(e),d(!1)};return(0,a.jsx)("div",{children:c?(0,a.jsx)(eb,{message:null!==(t=null==n?void 0:n.title)&&void 0!==t?t:"",onSubmit:m,onCancel:()=>d(!1),inputClassName:"text-3xl font-semibold"}):(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("h1",{className:(0,C.cn)("text-4xl font-semibold",{"animate-pulse text-muted-foreground":s}),children:null==n?void 0:n.title}),"edit"===o&&!l&&(0,a.jsx)(A.z,{size:"icon",className:"mt-1 shrink-0 rounded-full shadow-none",onClick:e=>d(!0),variant:"secondary",children:(0,a.jsx)(k.IconEdit,{})})]})})}var eC=n(62226),eA=n.n(eC),ek=n(6797),eI=n.n(ek),eD=n(52807),eP=n(66686),eZ=n(25600),e_=n(29),eR=n(21008),ez=n(89811);function eF(){return(0,a.jsx)("div",{className:"mx-auto mt-8 grid grid-cols-4 gap-2 px-4 pb-32 lg:max-w-5xl lg:px-0",children:(0,a.jsxs)("div",{className:"col-span-3 space-y-12",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(P.O,{className:"mb-6 h-6 w-[50%]"}),(0,a.jsx)(eL,{}),(0,a.jsx)(eT,{})]}),(0,a.jsx)(eM,{})]})})}function eM(){return(0,a.jsx)("div",{className:"w-full space-y-12",children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(eO,{}),(0,a.jsx)(eT,{})]},t))})}function eO(){return(0,a.jsx)("div",{className:"mb-6 w-full",children:(0,a.jsx)(P.O,{className:"w-[50%]"})})}function eT(){return(0,a.jsxs)("div",{className:"w-full space-y-3",children:[(0,a.jsx)(P.O,{className:"w-[80%]"}),(0,a.jsx)(P.O,{className:"w-[30%]"}),(0,a.jsx)(P.O,{className:"w-[80%]"}),(0,a.jsx)(P.O,{className:"w-[30%]"})]})}function eL(){return(0,a.jsxs)("div",{className:"my-4 flex w-full items-center gap-4",children:[(0,a.jsx)(P.O,{className:"h-6 w-6 rounded-full"}),(0,a.jsx)(P.O,{className:"w-20"})]})}let eE=(0,O.BX)("\n  mutation updatePageSectionContent($input: UpdatePageSectionContentInput!) {\n    updatePageSectionContent(input: $input)\n  }\n");function eU(e){let{className:t,section:n,isGenerating:i,enableMoveUp:s,enableMoveDown:o,onUpdate:c,enableDeveloperMode:d}=e,{mode:u,isPageOwner:m,isLoading:f,pendingSectionIds:x,onDeleteSection:h,onMoveSectionPosition:g}=(0,r.useContext)(er),v=x.has(n.id)&&!n.content,[j,b]=(0,r.useState)(!1),y=(0,w.Db)(eE),N=n.attachments.code,S=n.attachments.codeFileList,I=n.attachments.doc,D=(0,r.useMemo)(()=>(0,l.Z)([...I||[],S,...N]),[S,N,I]),Z=null==D?void 0:D.length,_=(0,r.useMemo)(()=>{let e=[];for(let t of D)if(t.__typename)switch(t.__typename){case"AttachmentCode":e.push("code");break;case"AttachmentCodeFileList":e.push("codeFileList");break;case"MessageAttachmentCommitDoc":case"AttachmentCommitDoc":e.push("commit");break;case"AttachmentWebDoc":case"MessageAttachmentWebDoc":case"AttachmentIssueDoc":case"MessageAttachmentIssueDoc":case"MessageAttachmentPullDoc":case"AttachmentPullDoc":e.push(new URL(t.link).hostname)}return(0,eD.Z)((0,l.Z)(e)).slice(0,3)},[D]),R=()=>{g(n.id,p.pV.Up)},F=()=>{g(n.id,p.pV.Down)},M=async e=>{var t;let a=await y({input:{id:n.id,content:e}});if(null==a||null===(t=a.data)||void 0===t||!t.updatePageSectionContent)return null==a?void 0:a.error;c(e),b(!1)};return(0,a.jsx)("div",{className:(0,C.cn)("flex flex-col gap-y-5",t),children:(0,a.jsx)(z.Z,{loading:v,fallback:(0,a.jsx)(eT,{}),children:(0,a.jsxs)("div",{children:[i&&!n.content&&(0,a.jsx)(P.O,{className:"mt-1 h-40 w-full"}),j?(0,a.jsx)(eb,{message:n.content,onCancel:()=>b(!1),onSubmit:M}):(0,a.jsx)(ej.J,{message:n.content,canWrapLongLines:!i,supportsOnApplyInEditorV2:!1,className:"prose-p:my-0.5 prose-ol:my-1 prose-ul:my-1",attachmentCode:N,attachmentDocs:I}),!i&&(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[Z>0&&(0,a.jsxs)(eZ.yo,{children:[(0,a.jsx)(eZ.aM,{asChild:!0,children:(0,a.jsxs)("div",{className:"group relative flex w-32 cursor-pointer items-center overflow-hidden rounded-full border py-1 hover:bg-muted",children:[(0,a.jsx)("div",{className:"ml-1.5 flex items-center -space-x-2 transition-all duration-300 ease-in-out group-hover:space-x-0",children:(0,a.jsx)(eG,{hostnames:_})}),(0,a.jsxs)("span",{className:"ml-2 whitespace-nowrap text-xs text-muted-foreground",children:[Z," sources"]}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-2 bg-gradient-to-l from-background to-transparent"})]})}),(0,a.jsxs)(eZ.ue,{className:"flex w-[50vw] min-w-[300px] flex-col",children:[(0,a.jsxs)(eZ.Tu,{className:"border-b",children:[(0,a.jsxs)(eZ.bC,{children:[Z," Sources"]}),(0,a.jsx)(eZ.sw,{})]}),(0,a.jsx)("div",{className:"flex-1 space-y-3 overflow-y-auto",children:D.map((e,t)=>(0,a.jsx)(eW,{enableDeveloperMode:d,source:e},t))})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-x-3",children:m&&"edit"===u&&!f&&!j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(A.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",disabled:f,onClick:()=>{b(!0)},children:[(0,a.jsx)(k.IconEdit,{}),"Edit"]}),s&&(0,a.jsxs)(A.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",onClick:e=>R(),disabled:f,children:[(0,a.jsx)(k.IconArrowDown,{className:"rotate-180"}),"Move Up"]}),o&&(0,a.jsxs)(A.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",onClick:e=>F(),disabled:f,children:[(0,a.jsx)(k.IconArrowDown,{}),"Move Down"]}),(0,a.jsxs)(A.z,{size:"sm",variant:"hover-destructive",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",disabled:f,onClick:()=>{h(n.id)},children:[(0,a.jsx)(k.IconTrash,{}),"Delete"]})]})})]})]})})})}function eW(e){let{source:t,enableDeveloperMode:n}=e,r="AttachmentCodeFileList"===t.__typename,i="MessageAttachmentCode"===t.__typename||"AttachmentCode"===t.__typename,s="AttachmentIssueDoc"===t.__typename||"AttachmentPullDoc"===t.__typename||"AttachmentWebDoc"===t.__typename,o="AttachmentCommitDoc"===t.__typename;if(r)return(0,a.jsxs)("div",{className:"flex gap-2 overflow-hidden rounded-lg border bg-accent p-3 text-accent-foreground hover:bg-accent/70",children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(k.IconListTree,{})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,a.jsx)("div",{className:"shrink-0 text-xs",children:(0,a.jsx)("span",{className:"font-semibold leading-5",children:"File list"})}),(0,a.jsx)("div",{className:"max-h-[90px] flex-1 overflow-auto",children:(0,a.jsx)("pre",{className:"text-xs",children:t.fileList.join("\n")})}),!!t.truncated&&(0,a.jsx)("div",{className:"mt-2 shrink-0 border-t pt-2 text-xs text-muted-foreground",children:"File list truncated. (Maximum number of items has been reached)"})]})]});if(i){var l,c,d,u;let e=(0,C.Cn)(t.filepath),r=null==t?void 0:null===(l=t.extra)||void 0===l?void 0:l.scores;return(0,a.jsxs)(e_.u,{delayDuration:0,children:[(0,a.jsx)(e_.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"flex w-full items-start gap-2",onClick:()=>{var e;if(!t.filepath)return;let n=(0,C.XX)(window.location.origin,{kind:"file",...t,commit:null!==(e=t.commit)&&void 0!==e?e:void 0,range:(0,C.OV)(t)});window.open(n,"_blank")},children:(0,a.jsxs)("div",{className:"relative flex flex-1 cursor-pointer gap-2 rounded-lg bg-accent p-3 text-accent-foreground hover:bg-accent/70",children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(k.IconCode,{})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:[(0,a.jsxs)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold leading-5",children:[(0,C.UA)(t.filepath),(0,a.jsx)(eR.o,{range:(0,C.OV)(t)})]}),!!e&&(0,a.jsx)("div",{className:"break-all text-xs text-muted-foreground",children:e})]})]})})}),(0,a.jsx)(e_._v,{hidden:!(n&&r),side:"left",children:!!r&&(0,a.jsxs)("div",{className:"pt-1",children:[(0,a.jsx)("div",{className:"mb-1 font-semibold",children:"Scores"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"rrf:"}),null!==(c=null==r?void 0:r.rrf)&&void 0!==c?c:"-"]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"bm25:"}),null!==(d=null==r?void 0:r.bm25)&&void 0!==d?d:"-"]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"embedding:"}),null!==(u=null==r?void 0:r.embedding)&&void 0!==u?u:"-"]})]})]})})]})}return s?(0,a.jsx)("div",{className:"flex items-start gap-2",children:(0,a.jsx)("div",{className:"relative flex flex-1 cursor-pointer gap-2 rounded-lg bg-accent p-3 text-accent-foreground hover:bg-accent/70",children:(0,a.jsx)("div",{className:"relative flex flex-col justify-between",onClick:()=>window.open(t.link),children:(0,a.jsx)(eV,{source:t})})})}):o?(0,a.jsx)("div",{className:"flex items-start gap-2",children:(0,a.jsx)("div",{className:"relative flex flex-1 cursor-pointer flex-col justify-between rounded-lg bg-accent p-3 text-accent-foreground hover:bg-accent/70",children:(0,a.jsx)(e$,{source:t})})}):null}function eV(e){let{source:t}=e;if((0,C.j9)(t))return null;let{hostname:n}=new URL(t.link),r="AttachmentIssueDoc"===t.__typename,i="AttachmentPullDoc"===t.__typename,s="AttachmentWebDoc"===t.__typename?void 0:t.author,o=(r||i)&&!!s;return(0,a.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,a.jsx)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold",children:t.title}),o&&(0,a.jsxs)("div",{className:"flex items-center gap-1 overflow-x-hidden",children:[(0,a.jsx)(M.Yt,{user:s,className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsx)("p",{className:"truncate text-xs font-medium text-muted-foreground",children:null==s?void 0:s.name})]}),!o&&(0,a.jsx)("p",{className:(0,C.cn)(" w-full overflow-hidden text-ellipsis break-all text-xs text-muted-foreground",o?"line-clamp-1":"line-clamp-2"),children:eB((0,C.cx)(t))})]}),(0,a.jsx)("div",{className:"flex items-center text-xs text-muted-foreground",children:(0,a.jsxs)("div",{className:"flex w-full flex-1 items-center justify-between gap-1",children:[(0,a.jsxs)("div",{className:"flex flex-1 items-center",children:[(0,a.jsx)(ez.V,{hostname:n}),(0,a.jsx)("p",{className:"ml-1 truncate",children:n.replace("www.","").split("/")[0]})]}),(0,a.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[r&&(0,a.jsxs)(a.Fragment,{children:[t.closed?(0,a.jsx)(k.IconCheckCircled,{className:"h-3.5 w-3.5"}):(0,a.jsx)(k.IconCircleDot,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:t.closed?"Closed":"Open"})]}),i&&(0,a.jsxs)(a.Fragment,{children:[t.merged?(0,a.jsx)(k.IconGitMerge,{className:"h-3.5 w-3.5"}):(0,a.jsx)(k.IconGitPullRequest,{className:"h-3.5 w-3.5"}),t.merged?"Merged":"Open"]})]})]})})]})}function e$(e){let{source:t}=e;if(!(0,C.j9)(t))return null;let n=t.author,r=!!n;return(0,a.jsx)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,a.jsxs)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold",children:[t.sha.slice(0,7),t.message?": ".concat(t.message):""]}),r&&(0,a.jsxs)("div",{className:"flex items-center gap-1 overflow-x-hidden",children:[(0,a.jsx)(M.Yt,{user:n,className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsx)("p",{className:"truncate text-xs font-medium text-muted-foreground",children:null==n?void 0:n.name})]}),!r&&(0,a.jsx)("p",{className:(0,C.cn)(" w-full overflow-hidden text-ellipsis break-all text-xs text-muted-foreground",r?"line-clamp-1":"line-clamp-2"),children:eB((0,C.cx)(t))})]})})}let eB=e=>{let t=eA().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),n=eP.TU.parse(t),a=eI().decode(n),r=a.replace(/<\/?[^>]+(>|$)/g,"");return r};function eq(e){let{children:t,className:n}=e;return(0,a.jsx)("div",{className:(0,C.cn)("relative z-20 flex h-5 w-5 items-center justify-center rounded-full transition-all duration-300 ease-in-out",n),children:t})}function eG(e){let{hostnames:t}=e;return(0,a.jsx)(a.Fragment,{children:t.map(e=>"codeFileList"===e?(0,a.jsx)(eq,{className:"bg-background group-hover:bg-transparent",children:(0,a.jsx)(k.IconListTree,{className:"h-4 w-4 rounded-full bg-primary p-0.5 text-primary-foreground"})},e):"code"===e?(0,a.jsx)(eq,{className:"bg-background group-hover:bg-transparent",children:(0,a.jsx)("div",{className:"flex h-3.5 w-3.5 items-center justify-center rounded-full border bg-primary text-primary-foreground",children:(0,a.jsx)(k.IconCode,{strokeWidth:3,className:"h-2.5 w-2.5"})})},e):"commit"===e?(0,a.jsx)(eq,{className:"bg-background group-hover:bg-transparent",children:(0,a.jsx)("div",{className:"flex h-3.5 w-3.5 items-center justify-center rounded-full border bg-primary text-primary-foreground",children:(0,a.jsx)(k.IconGitCommit,{strokeWidth:3,className:"h-2.5 w-2.5"})})},e):(0,a.jsx)(eq,{className:"flex h-5 w-5 items-center justify-center bg-background p-0 group-hover:bg-transparent",children:(0,a.jsx)(ez.V,{hostname:e})},e))})}let eH=(0,O.BX)("\n  mutation updatePageSectionTitle($input: UpdatePageSectionTitleInput!) {\n    updatePageSectionTitle(input: $input)\n  }\n");function eQ(e){let{section:t,className:n,onUpdate:i,...s}=e,{pendingSectionIds:o,mode:l,isLoading:c}=(0,r.useContext)(er),[d,u]=(0,r.useState)(!1),m="edit"===l,f=o.has(t.id)&&!t.content,x=(0,w.Db)(eH),h=async e=>{var n;let a=await x({input:{id:t.id,title:e}});if(null==a||null===(n=a.data)||void 0===n||!n.updatePageSectionTitle)return null==a?void 0:a.error;i(e),u(!1)};return(0,r.useEffect)(()=>{!m&&d&&u(!0)},[m]),(0,a.jsx)("div",{className:(0,C.cn)("section-title",n),id:t.id,children:d?(0,a.jsx)(eb,{message:t.title,onSubmit:h,onCancel:()=>u(!1),inputClassName:"text-3xl font-semibold"}):(0,a.jsxs)("div",{className:(0,C.cn)("flex items-baseline gap-2 font-semibold"),id:t.id,...s,children:[(0,a.jsx)(ej.J,{message:t.title,contextInfo:void 0,supportsOnApplyInEditorV2:!1,className:(0,C.cn)("text-3xl prose-h2:text-foreground prose-p:mb-1 prose-p:mt-0",{"text-foreground/50":f}),headline:!0}),m&&!c&&(0,a.jsx)(A.z,{size:"icon",className:"shrink-0 rounded-full shadow-none",onClick:e=>u(!0),variant:"secondary",children:(0,a.jsx)(k.IconEdit,{})})]})})}function eY(){var e,t,n,O;let[{data:V}]=(0,b.P)(),[{data:B,fetching:q}]=(0,f.aM)({query:S.Gx}),[G]=(0,h.m3)(),[H]=(0,h.qB)(),{updateUrlComponents:Q,pathname:Y,router:X}=(0,y.Z)(),[K,J]=(0,r.useState)(),[ee,et]=(0,r.useState)(!1),en=(0,N.uz)(e=>e.pendingThreadId),ea=(0,N.uz)(e=>e.pendingThreadTitle),[ei,ec]=(0,r.useState)(en?"edit":"view"),[ed,eu]=(0,r.useState)(new Set),[em,ef]=(0,r.useState)(!!en),[ex,eh]=(0,r.useState)(void 0),[eg,ej]=(0,r.useState)(!0),eb=(0,r.useRef)(null),[ey]=(0,_.Hb)(),ew=(0,r.useRef)(!1),{theme:eC}=(0,g.X)(),[eA,ek]=(0,r.useState)(),[eI,eD]=(0,r.useState)(),[eP,eZ]=(0,r.useState)(),[e_,eR]=(0,r.useState)(),[ez,eL]=(0,r.useState)(!1),[eE,eW]=(0,r.useState)(),[eV,e$]=(0,r.useState)(!1),[eB,eq]=(0,r.useState)(!1),[eG,eH]=(0,r.useState)(!1),eY=(0,r.useRef)(null),[eX,eK]=(0,r.useState)(45),eJ=(0,r.useRef)(eX),[e0,e1]=(0,r.useState)(!1),e2=(0,r.useMemo)(()=>{var e,t;if(!K)return;let n=null===(t=K.match(/^\/pages\/(.*)/))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.split("-").pop();return"new"===n?void 0:n},[K]),e5=(0,r.useMemo)(()=>"/pages/new"===K,[K]),e4=(0,r.useRef)(),e3=(0,j.d)(()=>{var e;null===(e=e4.current)||void 0===e||e.call(e4),e4.current=void 0,eL(!1),eu(new Set),eh(void 0),ej(!0),e1(!1)}),e6=e=>{e&&eZ(t=>t?"generateSectionTitlesMessages"in e?{...t,generateSectionTitlesMessages:(0,l.Z)((0,c.Z)([t.generateSectionTitlesMessages,e.generateSectionTitlesMessages]))}:{...t,...(0,d.Z)(e,"__typename")}:(0,d.Z)(e,"__typename"))},e8=(e,t)=>{e&&t&&eZ(n=>{if(!n)return{sections:[{id:t,...e}]};let a=n.sections||[];return a.find(e=>e.id===t)?{...n,sections:a.map(n=>n.id===t?{...n,...e}:n)}:{...n,sections:a.concat([{id:t,...e}])}})},e7=e=>{var t;if(!e)return;let{title:n,id:a}=e,r=null!==(t=(n||"").split("\n")[0])&&void 0!==t?t:"",s=r.slice(0,x.$I),o=(0,i.Z)(s),c=(0,l.Z)([o,a]).join("-"),d=Q({pathname:"/pages/".concat(c),replace:!0});return location.origin+d},e9=e=>{switch(e.__typename){case"PageCreated":ek(e.id),eD(t=>t?{...t,id:e.id,title:e.title,authorId:e.authorId}:t),e6(e.debugData),eq(!1),e1(!0),e7(e);break;case"PageContentDelta":eD(t=>t?{...t,content:(t.content||"")+e.delta}:t);break;case"PageContentCompleted":e6(e.debugData);break;case"PageSectionsCreated":{let t=e.sections.map(e=>({...e,pageId:eA,content:"",attachments:{code:[],codeFileList:null,doc:[]}}));eu(new Set(e.sections.map(e=>e.id))),eR(t),e6(e.debugData);break}case"PageSectionAttachmentCodeFileList":eR(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{...t.attachments,codeFileList:e.codeFileList}}:t):t);break;case"PageSectionAttachmentCode":{eR(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{...t.attachments,code:e.codes.map(e=>({...e.code,extra:{scores:e.scores}}))}}:t):t);let t=e.debugData?{attachmentCodeQuery:e.debugData}:void 0;e8(t,e.id);break}case"PageSectionAttachmentDoc":{eR(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{...t.attachments,doc:e.doc.map(e=>({...e.doc,extra:{score:e.score}}))}}:t):t);let t=e.debugData?{attachmentDocQuery:e.debugData}:void 0;e8(t,e.id);break}case"PageSectionContentDelta":eh(e.id),eR(t=>t?t.map(t=>t.id===e.id?{...t,content:(t.content||"")+e.delta}:t):t);break;case"PageSectionContentCompleted":{var t;eu(t=>{if(!t.has(e.id))return t;let n=new Set(t);return n.delete(e.id),n});let n=(null===(t=e.debugData)||void 0===t?void 0:t.generateSectionContentMessages)?{generateSectionContentMessages:e.debugData.generateSectionContentMessages}:void 0;e8(n,e.id);break}case"PageCompleted":e3.current()}},te=e=>{switch(e.__typename){case"PageSectionCreated":{let{id:t,title:n,position:a}=e;eh(t),eu(new Set([t])),eR(e=>{if(!e)return e;let r=e.slice(0,-1);return[...r,{id:t,title:n,position:a,content:"",pageId:eA,attachments:{code:[],codeFileList:null,doc:[]}}]}),e6(e.debugData),e1(!0);break}case"PageSectionContentDelta":{let{delta:t,id:n}=e;eR(e=>e?e.map(e=>e.id===n?{...e,content:e.content+t}:e):e);break}case"PageSectionAttachmentCodeFileList":eR(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{...t.attachments,codeFileList:e.codeFileList}}:t):t);break;case"PageSectionAttachmentCode":{eR(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{code:e.codes.map(e=>({...e.code,extra:{scores:e.scores}})),codeFileList:t.attachments.codeFileList}}:t):t);let t=e.debugData?{attachmentCodeQuery:e.debugData}:void 0;e8(t,e.id);break}case"PageSectionAttachmentDoc":{eR(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{...t.attachments,doc:e.doc.map(e=>({...e.doc,extra:{score:e.score}}))}}:t):t);let t=e.debugData?{attachmentDocQuery:e.debugData}:void 0;e8(t,e.id);break}case"PageSectionContentCompleted":{var t,n;let a=(null===(n=e.debugData)||void 0===n?void 0:null===(t=n.generateSectionContentMessages)||void 0===t?void 0:t.length)?{generateSectionContentMessages:e.debugData.generateSectionContentMessages}:void 0;e8(a,e.id),e3.current()}}},tt=async e=>{if(!eA)return;let t=(0,C.x0)();eL(!0),eW(void 0),eR(n=>{var a;let r=(null==n?void 0:null===(a=n[n.length-1])||void 0===a?void 0:a.position)||0,i={id:t,title:e,pageId:eA,content:"",position:r+1,attachments:{code:[],codeFileList:null,doc:[]}};return n?[...n,i]:[i]}),eu(new Set([t])),eh(t);let{unsubscribe:n}=w.Lp.subscription(E,{input:{pageId:eA,titlePrompt:e,docQuery:{sourceIds:(0,l.Z)([null==eI?void 0:eI.codeSourceId,H.value?"page":void 0]),content:e,searchPublic:!1},debugOption:(null==G?void 0:G.value)?{returnChatCompletionRequest:!0,returnQueryRequest:!0}:void 0}}).subscribe(e=>{var t;if(null==e?void 0:e.error){eL(!1),eW(e.error),n();return}let a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.createPageSectionRun;a&&te(a)});e4.current=n},tn=(e,t)=>{let n=new Date().toISOString(),a=(0,C.x0)();eD({id:a,authorId:"",title:t,content:"",updatedAt:n,createdAt:n}),eL(!0),ek(a),eq(!0),eW(void 0),ej(!1);let{unsubscribe:r}=w.Lp.subscription(T,{input:{threadId:e,debugOption:(null==G?void 0:G.value)?{returnChatCompletionRequest:!0,returnQueryRequest:!0}:void 0}}).subscribe(e=>{var t;if(null==e?void 0:e.error){eL(!1),eW(e.error),r();return}let n=null===(t=e.data)||void 0===t?void 0:t.createThreadToPageRun;n&&e9(n)});return r},ta=async e=>{let{titlePrompt:t,codeSourceId:n}=e,a=new Date().toISOString(),r=(0,C.x0)();eD({id:r,authorId:"",title:t,content:"",codeSourceId:n,updatedAt:a,createdAt:a}),ek(r),eL(!0),eq(!0),ej(!1);let{unsubscribe:i}=w.Lp.subscription(L,{input:{titlePrompt:t,codeQuery:n?{sourceId:n,content:t}:null,docQuery:{sourceIds:(0,l.Z)([n,H.value?"page":void 0]),content:t,searchPublic:!1},debugOption:(null==G?void 0:G.value)?{returnChatCompletionRequest:!0,returnQueryRequest:!0}:void 0}}).subscribe(e=>{var t;if(null==e?void 0:e.error){eL(!1),eW(e.error),i();return}let n=null===(t=e.data)||void 0===t?void 0:t.createPageRun;n&&e9(n)});e4.current=i},tr=(0,w.Db)(U),ti=(0,w.Db)(W);(0,r.useEffect)(()=>{e2&&ek(e2)},[e2]);let[ts,to]=(0,r.useState)(),[{data:tl,error:tc,fetching:td}]=(0,f.aM)({query:S.u5,variables:{ids:[e2]},pause:!e2});(0,r.useEffect)(()=>{var e,t;let n=null==tl?void 0:null===(t=tl.pages.edges)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.node;n&&eD(n)},[tl]);let[{data:tu,error:tm,fetching:tf,stale:tx}]=(0,f.aM)({query:S.bP,variables:{pageId:e2,first:30,after:ts},pause:!e2||em});(0,r.useEffect)(()=>{var e,t,n,a;if(!tx){if(null==tu?void 0:null===(t=tu.pageSections)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length){let e=tu.pageSections.edges.map(e=>e.node).slice().sort((e,t)=>e.position-t.position);eR(t=>(0,u.Z)([...t||[],...e],"id"))}if(null==tu?void 0:tu.pageSections){let e=null==tu?void 0:null===(a=tu.pageSections)||void 0===a?void 0:null===(n=a.pageInfo)||void 0===n?void 0:n.hasNextPage,t=null==tu?void 0:tu.pageSections.pageInfo.endCursor;e&&t?to(t):ef(!0)}}},[tu]);let[{data:th,fetching:tp}]=(0,f.aM)({query:S.TH,variables:{ids:(0,l.Z)([null==eI?void 0:eI.authorId])},pause:!(null==eI?void 0:eI.authorId)}),tg=null==th?void 0:null===(t=th.users)||void 0===t?void 0:null===(e=t.edges[0])||void 0===e?void 0:e.node,tv=(0,r.useMemo)(()=>{var e;if(!V)return!1;if(!e2)return!0;let t=null==tl?void 0:null===(e=tl.pages.edges)||void 0===e?void 0:e[0];return!!t&&V.me.id===t.node.authorId},[V,tl,e2]),tj=(0,r.useMemo)(()=>{var e;if(!(null==eI?void 0:eI.codeSourceId))return;let t=null==B?void 0:null===(e=B.contextInfo)||void 0===e?void 0:e.sources.find(e=>(0,C.wO)(e.sourceKind)&&e.sourceId===eI.codeSourceId);return t},[null==eI?void 0:eI.codeSourceId,B]);(0,r.useEffect)(()=>{var e,t,n;eG?(null===(e=eY.current)||void 0===e||e.expand(),null===(t=eY.current)||void 0===t||t.resize(eX)):null===(n=eY.current)||void 0===n||n.collapse()},[eG]),(0,r.useEffect)(()=>{(null==eI?void 0:eI.title)&&(document.title=eI.title)},[null==eI?void 0:eI.title]),(0,r.useEffect)(()=>{tm&&!em&&ef(!0)},[tm]),(0,r.useEffect)(()=>{J(Y),ee||et(!0)},[Y]),(0,r.useEffect)(()=>{ee&&!e2&&(()=>{if(!ew.current){if(ew.current=!0,en){e4.current=tn(en,null!=ea?ea:""),(0,N.BO)();return}e5&&ec("edit"),eA||e5||X.replace("/")}})()},[ee]),(0,r.useEffect)(()=>()=>{var e;null===(e=e4.current)||void 0===e||e.call(e4)},[]);let tb=async e=>{if(e2&&!ez)return tr({sectionId:e}).then(t=>{var n;if(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.deletePageSection){let t=null==e_?void 0:e_.filter(t=>t.id!==e);eR(t)}else m.A.error("Failed to delete")})},ty=(e,t,n)=>{let a=e.findIndex(e=>e.id===t);if(-1===a)return e;let r=n===p.pV.Up?a-1:a+1,i=e.map((e,t)=>t===a?{...e,position:n===p.pV.Up?e.position-1:e.position+1}:t===r?{...e,position:n===p.pV.Up?e.position+1:e.position-1}:e);return i.slice().sort((e,t)=>e.position-t.position)},tN=async(e,t)=>{if(e2&&!ez&&!eV)return e$(!0),ti({id:e,direction:t}).then(n=>{var a;(null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.movePageSection)?eR(n=>n?ty(n,e,t):n):m.A.error("Failed to move")}).finally(()=>{e$(!1)})},tw=(e,t)=>{e&&eR(n=>n?n.map(n=>n.id===e?{...n,...t}:n):n)},tS=(0,r.useMemo)(()=>{var e,t;if(em&&!td&&e2&&(tc||!(null==tl?void 0:null===(t=tl.pages)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length)))return tc||Error(x.ir)},[tl,td,tc,em,e2]),[tC]=(0,v.n)(tf||(null==tu?void 0:null===(O=tu.pageSections)||void 0===O?void 0:null===(n=O.pageInfo)||void 0===n?void 0:n.hasNextPage),200),tA=ey?{height:"calc(100vh - ".concat(_.wt,")")}:{height:"100vh"};return em&&(tS||tm||eE)?(0,a.jsx)(eo,{error:tS||tm||eE,pageIdFromURL:e2}):!em&&(tC||tx)?(0,a.jsxs)("div",{children:[(0,a.jsx)(es,{}),(0,a.jsx)(eF,{})]}):(0,a.jsx)(er.Provider,{value:{isLoading:ez,isPathnameInitialized:ee,isPageOwner:tv,mode:ei,setMode:ec,contextInfo:null==B?void 0:B.contextInfo,fetchingContextInfo:q,pendingSectionIds:ed,setPendingSectionIds:eu,currentSectionId:ex,pageIdFromURL:e2,isNew:e5,onDeleteSection:tb,onMoveSectionPosition:tN,enableDeveloperMode:G.value,devPanelOpen:eG,setDevPanelOpen:eH},children:(0,a.jsx)("div",{style:tA,children:(0,a.jsxs)(I.pO,{direction:"vertical",onLayout:e=>{(null==e?void 0:e[1])&&eK(e[1])},children:[(0,a.jsxs)(I.ee,{children:[(0,a.jsx)(es,{pageIdFromURL:e2,streamingDone:!ez}),(0,a.jsx)(z.Z,{loading:!e5&&(!em||!eI),fallback:(0,a.jsx)(eF,{}),delay:0,children:(0,a.jsxs)("main",{className:"h-[calc(100%-4rem)] pb-8 lg:pb-0",children:[(0,a.jsx)(D.ScrollArea,{className:"h-full w-full",ref:eb,children:(0,a.jsx)("div",{className:"mx-auto grid grid-cols-4 gap-2 px-4 pb-32 lg:max-w-5xl lg:px-0",children:e5&&!eI?(0,a.jsx)("div",{className:"col-span-4 mt-8 rounded-xl border pl-1 pr-3 pt-2 ring-2 ring-transparent transition-colors focus-within:ring-ring focus-visible:ring-ring",children:(0,a.jsx)(ep,{onSubmit:ta})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative col-span-3",children:[(0,a.jsxs)("div",{className:"mb-2 mt-8",children:[(0,a.jsxs)("div",{className:(0,C.cn)("flex items-center gap-2",{"mb-4":!!tj||G}),children:[!!tj&&(0,a.jsxs)("div",{className:"inline-flex items-center gap-1 rounded-lg bg-accent px-2 py-1 text-xs font-medium text-accent-foreground",children:[(0,a.jsx)(F.k,{kind:tj.sourceKind,className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:tj.sourceName})]}),G&&(0,a.jsx)(A.z,{size:"icon",variant:"ghost",onClick:()=>{eH(!0)},children:(0,a.jsx)(k.IconBug,{})})]}),(0,a.jsx)(z.Z,{loading:!eI,fallback:(0,a.jsx)(eO,{}),children:(0,a.jsx)(eS,{page:eI,isGeneratingPageTitle:eB,onUpdate:e=>{eD(t=>t?{...t,title:e}:t)}})}),(0,a.jsx)("div",{className:"my-4 flex gap-4 text-sm",children:(0,a.jsx)(z.Z,{loading:tp||!(null==eI?void 0:eI.authorId),fallback:(0,a.jsx)(P.O,{}),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.Yt,{user:tg,className:"h-8 w-8"}),(0,a.jsxs)("div",{className:"pt-0.5",children:[(0,a.jsx)("div",{className:"text-sm leading-none",children:null==tg?void 0:tg.name}),(0,a.jsx)("span",{className:"text-xs leading-none text-muted-foreground",children:function(e){let t=$()(e);if(t.isBefore($()().subtract(1,"year"))){let e=t.format("MMM D, YYYY, h:mm A");return e}if(t.isBefore($()().subtract(1,"month"))){let e=t.format("MMM D, hh:mm A");return"".concat(e)}return"".concat(t.fromNow())}(null==eI?void 0:eI.createdAt)})]})]})})})]}),(0,a.jsx)(z.Z,{loading:!eI||ez&&!(null==eI?void 0:eI.content),fallback:(0,a.jsx)(eT,{}),children:(0,a.jsx)(eN,{page:eI,onUpdate:e=>{eD(t=>t?{...t,content:e}:t)}})}),(0,a.jsxs)(z.Z,{loading:!eI||ez&&!(null==e_?void 0:e_.length),fallback:(0,a.jsx)("div",{className:"my-8 w-full",children:(0,a.jsx)(eM,{})}),children:[(0,a.jsx)(s.M,{initial:!1,children:null==e_?void 0:e_.map((e,t)=>{let n=ez&&e.id===ex,r=t<e_.length-1;return(0,a.jsxs)(o.E.div,{layout:!ez&&"edit"===ei&&"position",exit:{opacity:0},className:"space-y-2",transition:ez?{duration:0}:{duration:.3},children:[(0,a.jsx)(eQ,{className:"pt-12 prose-p:leading-tight",section:e,onUpdate:t=>{tw(e.id,{title:t})}}),(0,a.jsx)(eU,{section:e,isGenerating:n,enableMoveUp:0!==t,enableMoveDown:r,onUpdate:t=>{tw(e.id,{content:t})},enableDeveloperMode:G.value})]},"section_".concat(e.id))})},"".concat(ez,"-").concat(ei)),tv&&"edit"===ei&&eg&&(0,a.jsx)(ev,{onSubmit:tt,disabled:!eA||ez,className:"mt-10"})]})]}),(0,a.jsx)("div",{className:"relative col-span-1",children:(0,a.jsx)(el,{sections:e_})})]})})}),e0&&(0,a.jsx)("div",{className:"fixed bottom-16 w-full",children:(0,a.jsx)("div",{className:"mx-auto grid grid-cols-4 gap-2 lg:max-w-5xl",children:(0,a.jsx)(o.E.div,{className:"col-span-3 flex h-px justify-center overflow-y-visible",animate:{opacity:100,y:0},initial:{opacity:0,y:20},transition:{ease:"easeInOut",duration:.4,delay:.5},children:(0,a.jsxs)(A.z,{onClick:()=>{e3.current(),ez&&(eR(e=>e?e.filter(e=>!!e.content):e),eu(new Set))},variant:"outline",className:"gap-2 bg-background",children:[(0,a.jsx)(k.IconStop,{}),"stop generating"]})})})}),(0,a.jsx)(Z.K,{className:(0,C.cn)("!fixed !bottom-[5.4rem] !right-4 !top-auto z-40 border-muted-foreground lg:!bottom-[2.85rem]"),container:eb.current,offset:100,style:"dark"===eC?{"--background":"0 0% 12%"}:{}})]})})]}),(0,a.jsx)(I.Dp,{className:(0,C.cn)("hidden !h-[4px] border-none bg-background shadow-[0px_-4px_4px_rgba(0,0,0,0.2)] hover:bg-blue-500 active:bg-blue-500 dark:shadow-[0px_-4px_4px_rgba(255,255,255,0.2)]",eG&&"block")}),(0,a.jsx)(I.ee,{collapsible:!0,collapsedSize:0,defaultSize:0,ref:eY,onCollapse:()=>eH(!1),className:"z-50",children:(0,a.jsx)(R.b,{onClose:()=>eH(!1),value:eP,isFullScreen:100===eX,onToggleFullScreen:e=>{var t;let n=eJ.current;e?n=100:100===n&&(n=45),null===(t=eY.current)||void 0===t||t.resize(n),eK(n),eJ.current=eX},scrollOnUpdate:!1})})]})})})}},94779:function(e,t,n){"use strict";n.d(t,{b:function(){return x}});var a=n(36164),r=n(3546),i=n(93877),s=n(28312),o=n(9010),l=n(73492),c=n(31458),d=n(81565),u=n(57830),m=n(90379);let f=(0,r.lazy)(()=>n.e(726).then(n.t.bind(n,80726,23))),x=e=>{let{value:t,isFullScreen:n,onToggleFullScreen:x,onClose:h,scrollOnUpdate:p=!0}=e,[g]=(0,i.m3)(),{theme:v}=(0,o.X)(),j=(0,r.useRef)(null),{copyToClipboard:b}=(0,s.m)({timeout:0});return((0,r.useEffect)(()=>{if(t&&p){var e;null===(e=j.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})}},[t]),(null==g?void 0:g.value)&&open)?(0,a.jsxs)("div",{className:"flex h-full flex-col px-3 pt-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-end pb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.z,{variant:"ghost",size:"icon",onClick:e=>x(!n),children:(0,a.jsx)(d.IconChevronDown,{className:(0,l.cn)("transition-all",n?"":"rotate-180")})}),(0,a.jsx)(c.z,{variant:"ghost",size:"icon",onClick:h,children:(0,a.jsx)(d.IconClose,{})})]})}),(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(m.cg,{className:"p-2"}),children:t?(0,a.jsx)(u.ScrollArea,{className:"flex-1",ref:j,children:(0,a.jsx)(f,{theme:"dark"===v?"tomorrow":"rjv-default",src:t,style:{fontSize:"0.75rem"},collapseStringsAfterLength:120,displayObjectSize:!1,displayDataTypes:!1,enableClipboard:e=>{let{src:t}=e;"string"==typeof t&&b(t)}})}):null})]}):null}},69579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var a=n(36164),r=n(42891),i=n.n(r),s=n(70652),o=n.n(s),l=n(83332),c=n(76531),d=n(73492),u=n(68172),m=n(30601),f=n(63743),x=n(31458),h=n(52569),p=n(7449);function g(){let[e]=(0,m.Hb)(),t=e?{height:"calc(100vh - ".concat(m.wt,")")}:{height:"100vh"};return(0,a.jsxs)("div",{style:t,className:"flex flex-col",children:[(0,a.jsx)(v,{}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center",children:[(0,a.jsx)("h2",{className:"mt-4 text-6xl font-bold tracking-tight text-foreground sm:text-7xl",children:"404"}),(0,a.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Oops, it looks like the page you're looking for doesn't exist."}),(0,a.jsx)(o(),{className:(0,d.cn)("mt-6",(0,x.d)()),href:"/",children:"Home"})]})]})}function v(){return(0,a.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4 lg:px-10",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(o(),{href:"/",children:[(0,a.jsx)(i(),{src:c.Z,alt:"logo",width:128,className:"dark:hidden"}),(0,a.jsx)(i(),{src:l.Z,alt:"logo",width:96,className:"hidden dark:block"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)(u.q,{children:(0,a.jsx)(f.T,{})}),(0,a.jsx)(p.Z,{showSetting:!0,children:(0,a.jsx)(h.SQ,{className:"h-10 w-10 border"})})]})]})}},75217:function(e,t,n){"use strict";n.d(t,{v:function(){return f}});var a=n(36164),r=n(3546),i=n(73492),s=n(36065),o=n(81565),l=n(84942),c=n(37034),d=n(6230),u=n(31458),m=n(3448);function f(e){let{repos:t,value:n,onChange:f,isInitializing:x,placeholder:h="Codebase",showChevron:p,disabled:g}=e,[v,j]=(0,r.useState)(!1),b=(0,r.useRef)(null),y=e=>{g||f(e)},N=()=>{requestAnimationFrame(()=>{b.current&&(b.current.scrollTop=0)})},w=n?null==t?void 0:t.find(e=>e.sourceId===n):void 0,S=null==w?void 0:w.sourceName;return x||(null==t?void 0:t.length)?(0,a.jsx)(d.Z,{loading:x,fallback:(0,a.jsx)("div",{className:"flex w-full pl-2",children:(0,a.jsx)(m.O,{className:"my-2 h-4 w-[10rem]"})}),children:(0,a.jsxs)(l.J2,{open:v,onOpenChange:j,children:[(0,a.jsx)(l.xo,{className:"outline-none",asChild:!0,children:(0,a.jsxs)(u.z,{variant:"ghost",className:"gap-2 px-1.5 py-1 font-normal text-foreground/90 disabled:opacity-100",title:S||"select codebase",disabled:g,children:[w?(0,a.jsx)(c.k,{kind:w.sourceKind,className:"h-3.5 w-3.5 shrink-0"}):(0,a.jsx)(o.IconFolderGit,{className:"shrink-0"}),(0,a.jsx)("div",{className:"flex flex-1 items-center gap-1.5 truncate break-all",children:(0,a.jsx)("span",{className:(0,i.cn)("truncate",{"text-muted-foreground":!S}),children:S||h})}),!!p&&(0,a.jsx)(o.IconChevronDown,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground"})]})}),(0,a.jsx)(l.yk,{side:"bottom",align:"start",className:"max-h-[50vh] min-w-[20vw] max-w-[80vw] overflow-x-hidden rounded-md border bg-popover p-2 pb-0 text-popover-foreground shadow animate-in",children:(0,a.jsxs)(s.mY,{children:[(0,a.jsx)(s.sZ,{placeholder:"Select repository...",onValueChange:()=>{N()}}),(0,a.jsxs)(s.e8,{className:"max-h-[30vh]",ref:b,children:[(0,a.jsx)(s.rb,{children:"No repository found"}),(0,a.jsx)(s.fu,{children:null==t?void 0:t.map(e=>{let t=e.sourceId===n;return(0,a.jsxs)(s.di,{onSelect:()=>{y(e.sourceId),j(!1)},title:e.sourceName,children:[(0,a.jsx)(o.IconCheck,{className:(0,i.cn)("mr-1 shrink-0",e.sourceId===n?"opacity-100":"opacity-0")}),(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-1 overflow-x-hidden",children:[(0,a.jsx)(c.k,{kind:e.sourceKind,className:"shrink-0"}),(0,a.jsx)("div",{className:(0,i.cn)("truncate",{"font-semibold":t}),children:e.sourceName})]})]},e.sourceId)})})]}),(0,a.jsx)(s.zz,{}),(0,a.jsx)(s.fu,{children:(0,a.jsx)(s.di,{disabled:!n,className:"flex justify-center",onSelect:()=>{f(void 0),j(!1)},children:"Clear"})})]})})]})}):null}},73460:function(e,t,n){"use strict";n.d(t,{OL:function(){return g},_T:function(){return m},aR:function(){return l},f$:function(){return h},fY:function(){return f},le:function(){return v},vW:function(){return c},xo:function(){return x},yT:function(){return p}});var a=n(36164),r=n(3546),i=n(91460),s=n(73492),o=n(31458);let l=i.fC,c=i.xz,d=e=>{let{className:t,children:n,...r}=e;return(0,a.jsx)(i.h_,{className:(0,s.cn)(t),...r,children:(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:n})})};d.displayName=i.h_.displayName;let u=r.forwardRef((e,t)=>{let{className:n,children:r,...o}=e;return(0,a.jsx)(i.aV,{className:(0,s.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-opacity animate-in fade-in",n),...o,ref:t})});u.displayName=i.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(i.VY,{ref:t,className:(0,s.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-90 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",n),...r})]})});m.displayName=i.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};f.displayName="AlertDialogHeader";let x=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};x.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,s.cn)("text-lg font-semibold",n),...r})});h.displayName=i.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...r})});p.displayName=i.dk.displayName;let g=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.aU,{ref:t,className:(0,s.cn)((0,o.d)(),n),...r})});g.displayName=i.aU.displayName;let v=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.$j,{ref:t,className:(0,s.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...r})});v.displayName=i.$j.displayName},98150:function(e,t,n){"use strict";n.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return c},lX:function(){return h},pf:function(){return g},xJ:function(){return x},zG:function(){return v}});var a=n(36164),r=n(3546),i=n(74047),s=n(5493),o=n(73492),l=n(5266);let c=s.RV,d=r.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(d.Provider,{value:{name:t.name},children:(0,a.jsx)(s.Qr,{...t})})},m=()=>{let e=r.useContext(d),t=r.useContext(f),{getFieldState:n,formState:a}=(0,s.Gc)(),i=e.name||"root",o=n(i,a);if(!a)throw Error("useFormField should be used within <Form>");let{id:l}=t;return{id:l,name:i,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...o}},f=r.createContext({}),x=r.forwardRef((e,t)=>{let{className:n,...i}=e,s=r.useId();return(0,a.jsx)(f.Provider,{value:{id:s},children:(0,a.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",n),...i})})});x.displayName="FormItem";let h=r.forwardRef((e,t)=>{let{className:n,required:r,...i}=e,{error:s,formItemId:c}=m();return(0,a.jsx)(l._,{ref:t,className:(0,o.cn)(s&&"text-destructive",r&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:c,...i})});h.displayName="FormLabel";let p=r.forwardRef((e,t)=>{let{...n}=e,{error:r,formItemId:s,formDescriptionId:o,formMessageId:l}=m();return(0,a.jsx)(i.g7,{ref:t,id:s,"aria-describedby":r?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!r,...n})});p.displayName="FormControl";let g=r.forwardRef((e,t)=>{let{className:n,...r}=e,{formDescriptionId:i}=m();return(0,a.jsx)("div",{ref:t,id:i,className:(0,o.cn)("text-sm text-muted-foreground",n),...r})});g.displayName="FormDescription";let v=r.forwardRef((e,t)=>{let{className:n,children:r,...i}=e,{error:s,formMessageId:l}=m(),c=s?String(null==s?void 0:s.message):r;return c?(0,a.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-sm font-medium text-destructive",n),...i,children:c}):null});v.displayName="FormMessage"},53538:function(e,t,n){"use strict";n.d(t,{Dp:function(){return l},ee:function(){return o},pO:function(){return s}});var a=n(36164),r=n(6618),i=n(73492);let s=e=>{let{className:t,...n}=e;return(0,a.jsx)(r.eh,{className:(0,i.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},o=r.s_,l=e=>{let{withHandle:t,className:n,...s}=e;return(0,a.jsx)(r.OT,{className:(0,i.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...s,children:t&&(0,a.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})}},25600:function(e,t,n){"use strict";n.d(t,{FF:function(){return g},Tu:function(){return p},aM:function(){return d},bC:function(){return v},sw:function(){return u},ue:function(){return h},yo:function(){return c}});var a=n(36164),r=n(3546),i=n(4318),s=n(98641),o=n(1663),l=n(73492);let c=i.fC,d=i.xz,u=i.x8,m=i.h_,f=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:t})});f.displayName=i.aV.displayName;let x=(0,s.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=r.forwardRef((e,t)=>{let{side:n="right",className:r,children:s,...c}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(i.VY,{ref:t,className:(0,l.cn)(x({side:n}),r),...c,children:[s,(0,a.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=i.VY.displayName;let p=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};p.displayName="SheetHeader";let g=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};g.displayName="SheetFooter";let v=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",n),...r})});v.displayName=i.Dx.displayName;let j=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...r})});j.displayName=i.dk.displayName},4951:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var a=n(3546),r=n(40055),i=n(17451),s=n(70410);function o(){let[{data:e,fetching:t}]=(0,r.aM)({query:s.K5}),n=null==e?void 0:e.repositoryList,o=(0,i.aK)(e=>e.selectedRepoSourceId),l=(0,a.useMemo)(()=>{if((null==n?void 0:n.length)&&o)return n.find(e=>e.sourceId===o)},[n,o]);return{repos:n,isFetchingRepositories:t,selectedRepository:l,onSelectRepository:e=>{(0,i.xt)(e)}}}},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(3546),r=n(11978);function i(){let e=(0,r.usePathname)(),t=(0,r.useRouter)(),n=(0,r.useSearchParams)(),i=(0,a.useCallback)(e=>{let t=new URLSearchParams(n.toString());e&&Object.entries(e).forEach(e=>{let[n,a]=e;return t.set(n,a)});let a=t.toString();return a.length>0?"?".concat(a):""},[n]),s=(0,a.useCallback)(a=>{let r=function(e,t,n){var a,r;let i=null===(a=n.searchParams)||void 0===a?void 0:a.set,s=null===(r=n.searchParams)||void 0===r?void 0:r.del,o=new URLSearchParams(t.toString());i&&Object.entries(i).forEach(e=>{let[t,n]=e;return o.set(t,n)}),s&&(Array.isArray(s)?s.forEach(e=>o.delete(e)):o.delete(s));let l=o.toString(),c=e;return l.length>0&&(c+="?".concat(l)),n.hash&&(c+="#".concat(n.hash.replace(/^#/,""))),c}((null==a?void 0:a.pathname)||e,n,a);return a.replace?t.replace(r):t.push(r),r},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:i,updateUrlComponents:s}}},96274:function(e,t,n){"use strict";n.d(t,{BO:function(){return l},RU:function(){return o},uz:function(){return i}});var a=n(27257);let r={pendingThreadId:void 0,pendingThreadTitle:void 0},i=(0,a.Ue)()(()=>({...r})),s=i.setState,o=e=>{let{threadId:t,title:n}=e;s(()=>({pendingThreadId:t,pendingThreadTitle:n}))},l=()=>{s(()=>({pendingThreadId:void 0,pendingThreadTitle:void 0}))}},37266:function(e,t,n){"use strict";n.d(t,{CR:function(){return i},F0:function(){return o},wh:function(){return l}});var a=n(27257);let r={homePage:void 0},i=(0,a.Ue)()(()=>({...r})),s=i.setState,o=e=>s(()=>({homePage:e})),l=()=>s(()=>({homePage:void 0}))},76531:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.526f7cf9.png",height:184,width:607,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASklEQVR4nGPsKQh1f/HshV/PqtNtagrC8p++//rDAgQM//9/ZWJifMZYnRqg9+bVq6iZ51+1SP/5ovH//z8eRgbGbwyMjPxA9n0AMi8g2L1xUkUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},23455:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var a=n(65122),r=n(73037),i=n(3546),s=i.useLayoutEffect,o=function(e){var t=i.useRef(e);return s(function(){t.current=e}),t},l=function(e,t){if("function"==typeof e){e(t);return}e.current=t},c=function(e,t){var n=(0,i.useRef)();return(0,i.useCallback)(function(a){e.current=a,n.current&&l(n.current,null),n.current=t,t&&l(t,a)},[t])},d={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},u=function(e){Object.keys(d).forEach(function(t){e.style.setProperty(t,d[t],"important")})},m=null,f=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},x=function(){},h=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],p=!!document.documentElement.currentStyle,g=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=h.reduce(function(e,n){return e[n]=t[n],e},{}),a=n.boxSizing;if(""===a)return null;p&&"border-box"===a&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var r=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:r,borderSize:i}};function v(e,t,n){var a=o(n);i.useLayoutEffect(function(){var n=function(e){return a.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var j=function(e){v(window,"resize",e)},b=function(e){v(document.fonts,"loadingdone",e)},y=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],N=i.forwardRef(function(e,t){var n=e.cacheMeasurements,s=e.maxRows,o=e.minRows,l=e.onChange,d=void 0===l?x:l,h=e.onHeightChange,p=void 0===h?x:h,v=(0,r.Z)(e,y),N=void 0!==v.value,w=i.useRef(null),S=c(w,t),C=i.useRef(0),A=i.useRef(),k=function(){var e,t,a,r,i,l,c,d,x,h,v,j=w.current,b=n&&A.current?A.current:g(j);if(b){A.current=b;var y=(e=j.value||j.placeholder||"x",void 0===(t=o)&&(t=1),void 0===(a=s)&&(a=1/0),m||((m=document.createElement("textarea")).setAttribute("tabindex","-1"),m.setAttribute("aria-hidden","true"),u(m)),null===m.parentNode&&document.body.appendChild(m),r=b.paddingSize,i=b.borderSize,c=(l=b.sizingStyle).boxSizing,Object.keys(l).forEach(function(e){m.style[e]=l[e]}),u(m),m.value=e,d=f(m,b),m.value=e,d=f(m,b),m.value="x",h=(x=m.scrollHeight-r)*t,"border-box"===c&&(h=h+r+i),d=Math.max(h,d),v=x*a,"border-box"===c&&(v=v+r+i),[d=Math.min(v,d),x]),N=y[0],S=y[1];C.current!==N&&(C.current=N,j.style.setProperty("height",N+"px","important"),p(N,{rowHeight:S}))}};return i.useLayoutEffect(k),j(k),b(k),i.createElement("textarea",(0,a.Z)({},v,{onChange:function(e){N||k(),d(e)},ref:S}))})},1282:function(e,t){"use strict";t.Z=function(e,t,n){var a=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++a<r;)i[a]=e[a+t];return i}},71227:function(e,t){"use strict";t.Z=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}},9841:function(e,t,n){"use strict";var a=n(95973),r=n(9111),i=n(82149);t.Z=function(e){return(0,a.Z)(e,i.Z,r.Z)}},8621:function(e,t,n){"use strict";var a=(0,n(34659).Z)(Object.getPrototypeOf,Object);t.Z=a},9111:function(e,t,n){"use strict";var a=n(68085),r=n(8621),i=n(45270),s=n(25407),o=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,a.Z)(t,(0,i.Z)(e)),e=(0,r.Z)(e);return t}:s.Z;t.Z=o},82149:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(30762),r=n(84639),i=n(36586),s=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},o=Object.prototype.hasOwnProperty,l=function(e){if(!(0,r.Z)(e))return s(e);var t=(0,i.Z)(e),n=[];for(var a in e)"constructor"==a&&(t||!o.call(e,a))||n.push(a);return n},c=n(20568),d=function(e){return(0,c.Z)(e)?(0,a.Z)(e,!0):l(e)}},9920:function(e,t){"use strict";t.Z=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},78501:function(e,t,n){"use strict";n.d(t,{Z:function(){return ef}});var a=n(64143),r=n(78172),i=function(e,t){for(var n=-1,a=null==e?0:e.length;++n<a&&!1!==t(e[n],n,e););return e},s=n(26581),o=n(74913),l=function(e,t,n,a){var r=!n;n||(n={});for(var i=-1,l=t.length;++i<l;){var c=t[i],d=a?a(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),r?(0,o.Z)(n,c,d):(0,s.Z)(n,c,d)}return n},c=n(70014),d=n(82149),u=n(48717),m="object"==typeof exports&&exports&&!exports.nodeType&&exports,f=m&&"object"==typeof module&&module&&!module.nodeType&&module,x=f&&f.exports===m?u.Z.Buffer:void 0,h=x?x.allocUnsafe:void 0,p=function(e,t){if(t)return e.slice();var n=e.length,a=h?h(n):new e.constructor(n);return e.copy(a),a},g=n(71227),v=n(45270),j=n(9111),b=n(7555),y=n(9841),N=n(43108),w=Object.prototype.hasOwnProperty,S=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&w.call(e,"index")&&(n.index=e.index,n.input=e.input),n},C=n(90136),A=function(e){var t=new e.constructor(e.byteLength);return new C.Z(t).set(new C.Z(e)),t},k=function(e,t){var n=t?A(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},I=/\w*$/,D=function(e){var t=new e.constructor(e.source,I.exec(e));return t.lastIndex=e.lastIndex,t},P=n(7600),Z=P.Z?P.Z.prototype:void 0,_=Z?Z.valueOf:void 0,R=function(e,t){var n=t?A(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},z=function(e,t,n){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return A(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return k(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return R(e,n);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return D(e);case"[object Symbol]":return _?Object(_.call(e)):{}}},F=n(84639),M=Object.create,O=function(){function e(){}return function(t){if(!(0,F.Z)(t))return{};if(M)return M(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),T=n(8621),L=n(36586),E=n(38813),U=n(90328),W=n(96786),V=n(35270),$=n(20697),B=$.Z&&$.Z.isMap,q=B?(0,V.Z)(B):function(e){return(0,W.Z)(e)&&"[object Map]"==(0,N.Z)(e)},G=$.Z&&$.Z.isSet,H=G?(0,V.Z)(G):function(e){return(0,W.Z)(e)&&"[object Set]"==(0,N.Z)(e)},Q="[object Arguments]",Y="[object Function]",X="[object Object]",K={};K[Q]=K["[object Array]"]=K["[object ArrayBuffer]"]=K["[object DataView]"]=K["[object Boolean]"]=K["[object Date]"]=K["[object Float32Array]"]=K["[object Float64Array]"]=K["[object Int8Array]"]=K["[object Int16Array]"]=K["[object Int32Array]"]=K["[object Map]"]=K["[object Number]"]=K[X]=K["[object RegExp]"]=K["[object Set]"]=K["[object String]"]=K["[object Symbol]"]=K["[object Uint8Array]"]=K["[object Uint8ClampedArray]"]=K["[object Uint16Array]"]=K["[object Uint32Array]"]=!0,K["[object Error]"]=K[Y]=K["[object WeakMap]"]=!1;var J=function e(t,n,a,o,u,m){var f,x=1&n,h=2&n,w=4&n;if(a&&(f=u?a(t,o,u,m):a(t)),void 0!==f)return f;if(!(0,F.Z)(t))return t;var C=(0,E.Z)(t);if(C){if(f=S(t),!x)return(0,g.Z)(t,f)}else{var A,k,I,D,P=(0,N.Z)(t),Z=P==Y||"[object GeneratorFunction]"==P;if((0,U.Z)(t))return p(t,x);if(P==X||P==Q||Z&&!u){if(f=h||Z?{}:"function"!=typeof t.constructor||(0,L.Z)(t)?{}:O((0,T.Z)(t)),!x)return h?(k=(A=f)&&l(t,(0,d.Z)(t),A),l(t,(0,j.Z)(t),k)):(D=(I=f)&&l(t,(0,c.Z)(t),I),l(t,(0,v.Z)(t),D))}else{if(!K[P])return u?t:{};f=z(t,P,x)}}m||(m=new r.Z);var _=m.get(t);if(_)return _;m.set(t,f),H(t)?t.forEach(function(r){f.add(e(r,n,a,r,t,m))}):q(t)&&t.forEach(function(r,i){f.set(i,e(r,n,a,i,t,m))});var R=w?h?y.Z:b.Z:h?d.Z:c.Z,M=C?void 0:R(t);return i(M||t,function(r,i){M&&(r=t[i=r]),(0,s.Z)(f,i,e(r,n,a,i,t,m))}),f},ee=n(81913),et=n(9920),en=n(30586),ea=n(1282),er=n(80143),ei=function(e,t){var n,a;return t=(0,ee.Z)(t,e),n=e,null==(e=(a=t).length<2?n:(0,en.Z)(n,(0,ea.Z)(a,0,-1)))||delete e[er.Z(et.Z(t))]},es=n(17996),eo=Object.prototype,el=Function.prototype.toString,ec=eo.hasOwnProperty,ed=el.call(Object),eu=function(e){if(!(0,W.Z)(e)||"[object Object]"!=(0,es.Z)(e))return!1;var t=(0,T.Z)(e);if(null===t)return!0;var n=ec.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&el.call(n)==ed},em=function(e){return eu(e)?void 0:e},ef=(0,n(14595).Z)(function(e,t){var n={};if(null==e)return n;var r=!1;t=(0,a.Z)(t,function(t){return t=(0,ee.Z)(t,e),r||(r=t.length>1),t}),l(e,(0,y.Z)(e),n),r&&(n=J(n,7,em));for(var i=t.length;i--;)ei(n,t[i]);return n})}},function(e){e.O(0,[7565,8415,4648,6527,4691,55,3594,340,9906,4007,1283,3087,2429,8511,240,4421,3179,7070,1454,1002,1460,6805,4546,6065,9275,5605,3721,7003,6635,2882,2928,8160,5665,3492,1565,410,6978,9634,4526,3375,5289,1744],function(){return e(e.s=68109)}),_N_E=e.O()}]);