(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2342],{28242:function(e,t,n){"use strict";n.d(t,{F:function(){return d},f:function(){return c}});var r=n(3546);let a=["light","dark"],i="(prefers-color-scheme: dark)",s="undefined"==typeof window,o=(0,r.createContext)(void 0),l={setTheme:e=>{},themes:[]},d=()=>{var e;return null!==(e=(0,r.useContext)(o))&&void 0!==e?e:l},c=e=>(0,r.useContext)(o)?r.createElement(r.Fragment,null,e.children):r.createElement(m,e),u=["light","dark"],m=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:s=!0,storageKey:l="theme",themes:d=u,defaultTheme:c=n?"system":"light",attribute:m="data-theme",value:g,children:v,nonce:b})=>{let[j,y]=(0,r.useState)(()=>h(l,c)),[w,N]=(0,r.useState)(()=>h(l)),S=g?Object.values(g):d,C=(0,r.useCallback)(e=>{let r=e;if(!r)return;"system"===e&&n&&(r=x());let i=g?g[r]:r,o=t?p():null,l=document.documentElement;if("class"===m?(l.classList.remove(...S),i&&l.classList.add(i)):i?l.setAttribute(m,i):l.removeAttribute(m),s){let e=a.includes(c)?c:null,t=a.includes(r)?r:e;l.style.colorScheme=t}null==o||o()},[]),k=(0,r.useCallback)(e=>{y(e);try{localStorage.setItem(l,e)}catch(e){}},[e]),I=(0,r.useCallback)(t=>{let r=x(t);N(r),"system"===j&&n&&!e&&C("system")},[j,e]);(0,r.useEffect)(()=>{let e=window.matchMedia(i);return e.addListener(I),I(e),()=>e.removeListener(I)},[I]),(0,r.useEffect)(()=>{let e=e=>{e.key===l&&k(e.newValue||c)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[k]),(0,r.useEffect)(()=>{C(null!=e?e:j)},[e,j]);let R=(0,r.useMemo)(()=>({theme:j,setTheme:k,forcedTheme:e,resolvedTheme:"system"===j?w:j,themes:n?[...d,"system"]:d,systemTheme:n?w:void 0}),[j,k,e,w,n,d]);return r.createElement(o.Provider,{value:R},r.createElement(f,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:s,storageKey:l,themes:d,defaultTheme:c,attribute:m,value:g,children:v,attrs:S,nonce:b}),v)},f=(0,r.memo)(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:s,enableColorScheme:o,defaultTheme:l,value:d,attrs:c,nonce:u})=>{let m="system"===l,f="class"===n?`var d=document.documentElement,c=d.classList;c.remove(${c.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=o?a.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(e,t=!1,r=!0)=>{let i=d?d[e]:e,s=t?e+"|| ''":`'${i}'`,l="";return o&&r&&!t&&a.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===n?l+=t||i?`c.add(${s})`:"null":i&&(l+=`d[s](n,${s})`),l},x=e?`!function(){${f}${p(e)}}()`:s?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${m})){var t='${i}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${d?`var x=${JSON.stringify(d)};`:""}${p(d?"x[e]":"e",!0)}}${m?"":"else{"+p(l,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${d?`var x=${JSON.stringify(d)};`:""}${p(d?"x[e]":"e",!0)}}else{${p(l,!1,!1)};}${h}}catch(t){}}();`;return r.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:x}})},()=>!0),h=(e,t)=>{let n;if(!s){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},p=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},x=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light")},72282:function(e,t,n){Promise.resolve().then(n.bind(n,24682))},24682:function(e,t,n){"use strict";n.r(t),n.d(t,{Page:function(){return eC}});var r=n(36164),a=n(3546),i=n(70652),s=n.n(i),o=n(54767),l=n(28445),d=n(84837),c=n(1853),u=n(12978),m=n(99092),f=n.n(m),h=n(2578),p=n(40055),x=n(21808),g=n(43240),v=n(18500),b=n(9010),j=n(24449),y=n(16784),w=n(98454),N=n(44645),S=n(96274),C=n(37266),k=n(11634),I=n(70410),R=n(57288),P=n(31458),E=n(81565),A=n(57830),T=n(3448),D=n(72657),z=n(30601),$=n(6230),M=n(54646),F=n(69579),_=n(52569),L=n(11978),O=n(28312),V=n(73460),Z=n(63795),W=n(62202),U=n(68172),H=n(61249),B=n(63743),Y=n(7449);let K=(0,a.createContext)({}),q=(0,g.BX)("\n  mutation DeletePage($id: ID!) {\n    deletePage(id: $id)\n  }\n");function X(e){let{pageIdFromURL:t,streamingDone:n}=e,i=(0,L.useRouter)(),{isPageOwner:s,mode:o,setMode:l,isLoading:d}=(0,a.useContext)(K),[c,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)(!1),{copyToClipboard:p}=(0,O.m)({}),x=(0,k.Db)(q,{onCompleted(e){e.deletePage?i.replace("/"):(h.A.error("Failed to delete"),f(!1))},onError(e){h.A.error((null==e?void 0:e.message)||"Failed to delete"),f(!1)}}),g=e=>{e&&(0,C.wh)(),i.push("/")};return(0,r.jsxs)("header",{className:"relative flex h-16 w-full items-center justify-between border-b px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center gap-x-6",children:(0,r.jsxs)(P.z,{variant:"ghost",className:"-ml-1 pl-0 text-sm text-muted-foreground",onClick:()=>g(),children:[(0,r.jsx)(E.IconChevronLeft,{className:"mr-1 h-5 w-5"}),"Home"]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[s&&t?(0,r.jsx)(r.Fragment,{children:"edit"===o?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(P.z,{disabled:!n,onClick:e=>l("view"),children:"Done"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(W.h_,{modal:!1,children:[(0,r.jsx)(W.$F,{asChild:!0,children:(0,r.jsx)(P.z,{size:"icon",variant:"ghost",children:(0,r.jsx)(E.IconMore,{})})}),(0,r.jsxs)(W.AW,{align:"end",children:[(0,r.jsxs)(W.Xi,{className:"cursor-pointer gap-2",onSelect:()=>{p(window.location.href)},children:[(0,r.jsx)(E.IconShare,{}),"Share"]}),n&&t&&s&&(0,r.jsxs)(W.Xi,{className:"cursor-pointer gap-2 !text-destructive",onSelect:()=>u(!0),children:[(0,r.jsx)(E.IconTrash,{}),"Delete Page"]})]})]}),(0,r.jsxs)(P.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal",onClick:()=>l("edit"),children:[(0,r.jsx)(E.IconEdit,{}),"Edit"]})]})}):null,(0,r.jsx)(U.q,{children:(0,r.jsx)(B.T,{})}),(0,r.jsx)(H.L,{className:"mr-4"}),(0,r.jsx)(Y.Z,{showHome:!1,showSetting:!0,beforeRouteChange:()=>{(0,C.wh)()},children:(0,r.jsx)(_.SQ,{className:"h-10 w-10 border"})})]}),(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:d?(0,r.jsx)(Z.C,{variant:"secondary",children:"Writing..."}):"edit"===o?(0,r.jsx)(Z.C,{children:"Editing"}):null}),(0,r.jsx)(V.aR,{open:c,onOpenChange:u,children:(0,r.jsxs)(V._T,{children:[(0,r.jsxs)(V.fY,{children:[(0,r.jsx)(V.f$,{children:"Delete this page"}),(0,r.jsx)(V.yT,{children:"Are you sure you want to delete this page? This operation is not revertible."})]}),(0,r.jsxs)(V.xo,{children:[(0,r.jsx)(V.le,{children:"Cancel"}),(0,r.jsxs)(V.OL,{className:(0,P.d)({variant:"destructive"}),onClick:e=>{e.preventDefault(),f(!0),x({id:t}).then(e=>{var t;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.deletePage)?i.replace("/"):(h.A.error("Failed to delete"),f(!1))})},children:[m&&(0,r.jsx)(E.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, delete it"]})]})]})})]})}let G=e=>{let{sections:t}=e,{isLoading:n,pendingSectionIds:i}=(0,a.useContext)(K),[s,o]=(0,a.useState)(),l=(0,a.useRef)(null),d=(0,j.S)(e=>{o(e)},200);return(0,a.useEffect)(()=>{l.current=new IntersectionObserver(e=>{let t=e.filter(e=>e.isIntersecting).sort((e,t)=>e.boundingClientRect.top-t.boundingClientRect.top);if(t.length>0){let e=t[0];d.run(e.target.id)}},{root:null,rootMargin:"0px",threshold:.1});let e=document.querySelectorAll(".section-title");return e.forEach(e=>{var t;null===(t=l.current)||void 0===t||t.observe(e)}),()=>{var e;null===(e=l.current)||void 0===e||e.disconnect()}},[n,i]),(0,r.jsx)("nav",{className:"sticky right-0 top-0 p-4 pt-8",children:(0,r.jsx)("ul",{className:"flex flex-col space-y-1 border-l",children:null==t?void 0:t.map(e=>{let t=s===e.id;return(0,r.jsx)("li",{className:"relative -ml-px cursor-pointer",onClick:t=>{let n=document.getElementById(e.id);n&&n.scrollIntoView({behavior:"smooth",block:"start"})},children:(0,r.jsx)("div",{className:(0,R.cn)("truncate whitespace-nowrap pl-2 text-sm",{"text-foreground border-l border-foreground":t,"text-muted-foreground":!t}),children:e.title})},e.id)})})})};var J=n(84381),Q=n(5493),ee=n(23782),et=n(98150),en=n(82394);function er(e){let{onSubmit:t}=e,n=ee.Ry({title:ee.Z_().trim()}),a=(0,Q.cI)({resolver:(0,J.F)(n)}),i=a.watch("title"),s=async e=>{let n=await t(e.title.trim());n&&(0,k.zG)(a)(n)};return(0,r.jsx)(et.l0,{...a,children:(0,r.jsxs)("form",{onSubmit:a.handleSubmit(s),children:[(0,r.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,r.jsx)(et.Wi,{control:a.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(et.xJ,{className:"flex-1",children:[(0,r.jsx)(et.NI,{children:(0,r.jsx)(en.I,{autoFocus:!0,className:"h-auto w-full border-none text-3xl font-semibold shadow-none outline-none focus-visible:ring-0",placeholder:"What is your page about?",...t})}),(0,r.jsx)(et.zG,{})]})}}),(0,r.jsx)(P.z,{className:"h-auto w-auto px-2",type:"submit",disabled:!i,children:(0,r.jsx)(E.IconArrowRight,{})})]}),(0,r.jsx)("div",{className:"my-2",children:(0,r.jsx)(et.zG,{})})]})})}var ea=n(23455);function ei(e){let{onSubmit:t,disabled:n,className:i}=e,s=ee.Ry({title:ee.Z_().trim()}),o=(0,Q.cI)({resolver:(0,J.F)(s)}),{formRef:l,onKeyDown:d}=function(){let e=(0,a.useRef)(null);return{formRef:e,onKeyDown:t=>{if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent.isComposing){var n;null===(n=e.current)||void 0===n||n.requestSubmit(),t.preventDefault()}}}}(),c=o.watch("title"),{isSubmitting:u}=o.formState,m=n||!c||u,f=async e=>{if(m)return;let n=e.title;t(n).then(e=>{e&&(0,k.zG)(o)(e)}),o.reset({title:""})};return(0,r.jsx)(et.l0,{...o,children:(0,r.jsx)("form",{className:(0,R.cn)(i),onSubmit:o.handleSubmit(f),ref:l,children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(et.Wi,{control:o.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsx)(et.xJ,{className:"flex-1",children:(0,r.jsx)(et.NI,{children:(0,r.jsx)(ea.Z,{autoFocus:!0,draggable:!1,minRows:2,maxRows:6,className:"w-full rounded-lg border-2 bg-background p-4 pr-12 text-xl outline-ring",placeholder:"What is the section about?",onKeyDown:d,...t})})})}}),(0,r.jsx)(P.z,{size:"icon",className:"absolute right-4 top-1/2 z-10 h-7 w-7 -translate-y-1/2 rounded-full",type:"submit",disabled:m,children:(0,r.jsx)(E.IconPlus,{})})]})})})}var es=n(62226),eo=n.n(es),el=n(6797),ed=n.n(el),ec=n(66686),eu=(n(95052),n(25600),n(89811));function em(){return(0,r.jsx)("div",{className:"mx-auto mt-8 grid grid-cols-4 gap-2 px-4 pb-32 lg:max-w-5xl lg:px-0",children:(0,r.jsxs)("div",{className:"col-span-3 space-y-12",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(T.O,{className:"mb-6 h-6 w-[50%]"}),(0,r.jsx)(ex,{}),(0,r.jsx)(ep,{})]}),(0,r.jsx)(ef,{})]})})}function ef(){return(0,r.jsx)("div",{className:"w-full space-y-12",children:Array.from({length:3}).map((e,t)=>(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(eh,{}),(0,r.jsx)(ep,{})]},t))})}function eh(){return(0,r.jsx)("div",{className:"mb-6 w-full",children:(0,r.jsx)(T.O,{className:"w-[50%]"})})}function ep(){return(0,r.jsxs)("div",{className:"w-full space-y-3",children:[(0,r.jsx)(T.O,{className:"w-[80%]"}),(0,r.jsx)(T.O,{className:"w-[30%]"}),(0,r.jsx)(T.O,{className:"w-[80%]"}),(0,r.jsx)(T.O,{className:"w-[30%]"})]})}function ex(){return(0,r.jsxs)("div",{className:"my-4 flex w-full items-center gap-4",children:[(0,r.jsx)(T.O,{className:"h-6 w-6 rounded-full"}),(0,r.jsx)(T.O,{className:"w-20"})]})}function eg(e){let{className:t,section:n,isGenerating:i,enableMoveUp:s,enableMoveDown:o}=e,{mode:l,isPageOwner:d,isLoading:c,pendingSectionIds:u,onDeleteSection:m,onMoveSectionPosition:f}=(0,a.useContext)(K),h=u.has(n.id)&&!n.content,p=()=>{f(n.id,v.pV.Up)},x=()=>{f(n.id,v.pV.Down)};return(0,r.jsx)("div",{className:(0,R.cn)("flex flex-col gap-y-5",t),children:(0,r.jsx)($.Z,{loading:h,fallback:(0,r.jsx)(ep,{}),children:(0,r.jsxs)("div",{children:[i&&!n.content&&(0,r.jsx)(T.O,{className:"mt-1 h-40 w-full"}),(0,r.jsx)(M.J,{message:n.content,canWrapLongLines:!i,supportsOnApplyInEditorV2:!1,className:"prose-p:my-0.5 prose-ol:my-1 prose-ul:my-1"}),!i&&(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[!1,(0,r.jsx)("div",{className:"flex items-center gap-x-3",children:d&&"edit"===l&&!c&&(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsxs)(P.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-normal",onClick:e=>p(),disabled:c,children:[(0,r.jsx)(E.IconArrowDown,{className:"rotate-180"}),"Move Up"]}),o&&(0,r.jsxs)(P.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-normal",onClick:e=>x(),disabled:c,children:[(0,r.jsx)(E.IconArrowDown,{}),"Move Down"]}),(0,r.jsxs)(P.z,{size:"sm",variant:"hover-destructive",className:"h-auto gap-0.5 px-2 py-1 font-normal",disabled:c,onClick:()=>{m(n.id)},children:[(0,r.jsx)(E.IconTrash,{}),"Delete Section"]})]})})]})]})})})}let ev=e=>{let t=eo().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),n=ec.TU.parse(t),r=ed().decode(n),a=r.replace(/<\/?[^>]+(>|$)/g,"");return a};function eb(e){let{section:t,className:n,...i}=e,{pendingSectionIds:s}=(0,a.useContext)(K),o=s.has(t.id)&&!t.content;return(0,r.jsx)("div",{className:"section-title",id:t.id,children:(0,r.jsx)("div",{className:(0,R.cn)("flex items-center gap-2 font-semibold",n),id:t.id,...i,children:(0,r.jsx)(M.J,{message:t.title,contextInfo:void 0,supportsOnApplyInEditorV2:!1,className:(0,R.cn)("text-3xl prose-h2:text-foreground prose-p:mb-1 prose-p:mt-0",{"text-foreground/50":o}),headline:!0})})})}let ej=(0,g.BX)("\n  subscription createThreadToPageRun($threadId: ID!) {\n    createThreadToPageRun(threadId: $threadId) {\n      __typename\n      ... on PageCreated {\n        id\n        authorId\n        title\n      }\n      ... on PageContentDelta {\n        delta\n      }\n      ... on PageContentCompleted {\n        id\n      }\n      ... on PageSectionsCreated {\n        sections {\n          id\n          title\n          position\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n      }\n      ... on PageCompleted {\n        id\n      }\n    }\n  }\n"),ey=(0,g.BX)("\n  subscription createPageSectionRun($input: CreatePageSectionRunInput!) {\n    createPageSectionRun(input: $input) {\n      __typename\n      ... on PageSection {\n        id\n        title\n        position\n      }\n      ... on PageSectionContentDelta {\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n      }\n    }\n  }\n"),ew=(0,g.BX)("\n  subscription createPageRun($input: CreatePageRunInput!) {\n    createPageRun(input: $input) {\n      __typename\n      ... on PageCreated {\n        id\n        authorId\n        title\n      }\n      ... on PageContentDelta {\n        delta\n      }\n      ... on PageContentCompleted {\n        id\n      }\n      ... on PageSectionsCreated {\n        sections {\n          id\n          title\n          position\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n      }\n      ... on PageCompleted {\n        id\n      }\n    }\n  }\n"),eN=(0,g.BX)("\n  mutation DeletePageSection($sectionId: ID!) {\n    deletePageSection(sectionId: $sectionId)\n  }\n"),eS=(0,g.BX)("\n  mutation movePageSection($id: ID!, $direction: MoveSectionDirection!) {\n    movePageSection(id: $id, direction: $direction)\n  }\n");function eC(){var e,t,n,i,s;let[{data:m}]=(0,w.P)(),{updateUrlComponents:g,pathname:C,router:P}=(0,N.Z)(),[F,L]=(0,a.useState)(),[O,V]=(0,a.useState)(!1),Z=(0,S.uz)(e=>e.pendingThreadId),W=(0,S.uz)(e=>e.pendingThreadTitle),[U,H]=(0,a.useState)(Z?"edit":"view"),[B,Y]=(0,a.useState)(new Set),[q,J]=(0,a.useState)(!!Z),[Q,ee]=(0,a.useState)(void 0),[et,en]=(0,a.useState)(!0),ea=(0,a.useRef)(null),[es]=(0,z.Hb)(),eo=(0,a.useRef)(!1),{theme:el}=(0,b.X)(),[ed,ec]=(0,a.useState)(),[eu,ex]=(0,a.useState)(),[ev,eC]=(0,a.useState)(),[eI,eR]=(0,a.useState)(!1),[eP,eE]=(0,a.useState)(),[eA,eT]=(0,a.useState)(!1),[eD,ez]=(0,a.useState)(!1),e$=(0,a.useMemo)(()=>{var e,t;if(!F)return;let n=null===(t=F.match(/^\/pages\/(.*)/))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.split("-").pop();return"new"===n?void 0:n},[F]),eM=(0,a.useMemo)(()=>"/pages/new"===F,[F]),eF=(0,a.useRef)(),e_=(0,y.d)(()=>{var e;null===(e=eF.current)||void 0===e||e.call(eF),eF.current=void 0,eR(!1),Y(new Set),ee(void 0),en(!0)}),eL=e=>{var t;if(!e)return;let{title:n,id:r}=e,a=null!==(t=(n||"").split("\n")[0])&&void 0!==t?t:"",i=a.slice(0,x.$I),s=(0,o.Z)(i),l=(0,c.Z)([s,r]).join("-"),d=g({pathname:"/pages/".concat(l),replace:!0});return location.origin+d},eO=e=>{switch(e.__typename){case"PageCreated":ex(t=>t?{...t,id:e.id,title:e.title,authorId:e.authorId}:t),ec(e.id),ez(!1),eL(e);break;case"PageContentDelta":ex(t=>t?{...t,content:(t.content||"")+e.delta}:t);break;case"PageContentCompleted":break;case"PageSectionsCreated":{let t=e.sections.map(e=>({...e,pageId:ed,content:""}));Y(new Set(e.sections.map(e=>e.id))),eC(t);break}case"PageSectionContentDelta":ee(e.id),eC(t=>{let n=null==t?void 0:t.find(t=>t.id===e.id);return n&&t?t.map(t=>t.id===e.id?{...t,content:(t.content||"")+e.delta}:t):t});case"PageSectionContentCompleted":Y(t=>{if(!t.has(e.id))return t;let n=new Set(t);return n.delete(e.id),n});break;case"PageCompleted":e_.current()}},eV=e=>{switch(e.__typename){case"PageSection":{let{id:t,title:n,position:r}=e;ee(t),Y(new Set([t])),eC(e=>{if(!e)return e;let a=e.slice(0,-1);return[...a,{id:t,title:n,position:r,content:"",pageId:ed}]});break}case"PageSectionContentDelta":{let{delta:t}=e;eC(e=>{if(!e)return e;let n=e.length;return e.map((e,r)=>r===n-1?{...e,content:e.content+t}:e)});break}case"PageSectionContentCompleted":e_.current()}},eZ=async e=>{if(!ed)return;let t=(0,R.x0)();eR(!0),eE(void 0),eC(n=>{var r;let a=(null==n?void 0:null===(r=n[n.length-1])||void 0===r?void 0:r.position)||0,i={id:t,title:e,pageId:ed,content:"",position:a+1};return n?[...n,i]:[i]}),Y(new Set([t])),ee(t);let{unsubscribe:n}=k.Lp.subscription(ey,{input:{pageId:ed,titlePrompt:e}}).subscribe(e=>{var t;if(null==e?void 0:e.error){eR(!1),eE(e.error),n();return}let r=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.createPageSectionRun;r&&eV(r)});eF.current=n},eW=(e,t)=>{let n=new Date().toISOString(),r=(0,R.x0)();ex({id:r,authorId:"",title:t,content:"",updatedAt:n,createdAt:n}),eR(!0),ec(r),ez(!0),eE(void 0),en(!1);let{unsubscribe:a}=k.Lp.subscription(ej,{threadId:e}).subscribe(e=>{var t;if(null==e?void 0:e.error){eR(!1),eE(e.error),a();return}let n=null===(t=e.data)||void 0===t?void 0:t.createThreadToPageRun;n&&eO(n)});return a},eU=async e=>{let t=new Date().toISOString(),n=(0,R.x0)();ex({id:n,authorId:"",title:e,content:"",updatedAt:t,createdAt:t}),ec(n),eR(!0),ez(!0),en(!1);let{unsubscribe:r}=k.Lp.subscription(ew,{input:{titlePrompt:e}}).subscribe(e=>{var t;if(null==e?void 0:e.error){eR(!1),eE(e.error),r();return}let n=null===(t=e.data)||void 0===t?void 0:t.createPageRun;n&&eO(n)});eF.current=r},eH=(0,k.Db)(eN),eB=(0,k.Db)(eS);(0,a.useEffect)(()=>{e$&&ec(e$)},[e$]);let[eY,eK]=(0,a.useState)(),[{data:eq,error:eX,fetching:eG}]=(0,p.aM)({query:I.u5,variables:{ids:[e$]},pause:!e$});(0,a.useEffect)(()=>{var e,t;let n=null==eq?void 0:null===(t=eq.pages.edges)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.node;n&&ex(n)},[eq]);let[{data:eJ,error:eQ,fetching:e0,stale:e1}]=(0,p.aM)({query:I.bP,variables:{pageId:e$,first:30,after:eY},pause:!e$||q});(0,a.useEffect)(()=>{var e,t,n,r;if(!e1){if(null==eJ?void 0:null===(t=eJ.pageSections)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length){let e=eJ.pageSections.edges.map(e=>e.node).slice().sort((e,t)=>e.position-t.position);eC(t=>(0,u.Z)([...t||[],...e],"id"))}if(null==eJ?void 0:eJ.pageSections){let e=null==eJ?void 0:null===(r=eJ.pageSections)||void 0===r?void 0:null===(n=r.pageInfo)||void 0===n?void 0:n.hasNextPage,t=null==eJ?void 0:eJ.pageSections.pageInfo.endCursor;e&&t?eK(t):J(!0)}}},[eJ]);let[{data:e2,fetching:e4}]=(0,p.aM)({query:I.TH,variables:{ids:(0,c.Z)([null==eu?void 0:eu.authorId])},pause:!(null==eu?void 0:eu.authorId)}),e5=null==e2?void 0:null===(t=e2.users)||void 0===t?void 0:null===(e=t.edges[0])||void 0===e?void 0:e.node,e6=(0,a.useMemo)(()=>{var e;if(!m)return!1;if(!e$)return!0;let t=null==eq?void 0:null===(e=eq.pages.edges)||void 0===e?void 0:e[0];return!!t&&m.me.id===t.node.authorId},[m,eq,e$]);(0,a.useEffect)(()=>{(null==eu?void 0:eu.title)&&(document.title=eu.title)},[null==eu?void 0:eu.title]),(0,a.useEffect)(()=>{eQ&&!q&&J(!0)},[eQ]),(0,a.useEffect)(()=>{L(C),O||V(!0)},[C]),(0,a.useEffect)(()=>{O&&!e$&&(()=>{if(!eo.current){if(eo.current=!0,Z){eF.current=eW(Z,null!=W?W:""),(0,S.BO)();return}eM&&H("edit"),ed||eM||P.replace("/")}})()},[O]),(0,a.useEffect)(()=>()=>{var e;null===(e=eF.current)||void 0===e||e.call(eF)},[]);let e3=async e=>{if(e$&&!eI)return eH({sectionId:e}).then(t=>{var n;if(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.deletePageSection){let t=null==ev?void 0:ev.filter(t=>t.id!==e);eC(t)}else h.A.error("Failed to delete")})},e8=(e,t,n)=>{let r=e.findIndex(e=>e.id===t);if(-1===r)return e;let a=n===v.pV.Up?r-1:r+1,i=e.map((e,t)=>t===r?{...e,position:n===v.pV.Up?e.position-1:e.position+1}:t===a?{...e,position:n===v.pV.Up?e.position+1:e.position-1}:e);return i.slice().sort((e,t)=>e.position-t.position)},e7=async(e,t)=>{if(e$&&!eI&&!eA)return eT(!0),eB({id:e,direction:t}).then(n=>{var r;(null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.movePageSection)?eC(n=>n?e8(n,e,t):n):h.A.error("Failed to move")}).finally(()=>{eT(!1)})},e9=(0,a.useMemo)(()=>{var e,t;if(q&&!eG&&e$&&(eX||!(null==eq?void 0:null===(t=eq.pages)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length)))return eX||Error(x.ir)},[eq,eG,eX,q,e$]),[te]=(0,j.n)(e0||(null==eJ?void 0:null===(i=eJ.pageSections)||void 0===i?void 0:null===(n=i.pageInfo)||void 0===n?void 0:n.hasNextPage),200),tt=es?{height:"calc(100vh - ".concat(z.wt,")")}:{height:"100vh"};return q&&(e9||eQ||eP)?(0,r.jsx)(ek,{error:e9||eQ||eP,pageIdFromURL:e$}):!q&&(te||e1)?(0,r.jsxs)("div",{children:[(0,r.jsx)(X,{}),(0,r.jsx)(em,{})]}):(0,r.jsx)(K.Provider,{value:{isLoading:eI,isPathnameInitialized:O,isPageOwner:e6,mode:U,setMode:H,pendingSectionIds:B,setPendingSectionIds:Y,currentSectionId:Q,pageIdFromURL:e$,isNew:eM,onDeleteSection:e3,onMoveSectionPosition:e7},children:(0,r.jsxs)("div",{style:tt,children:[(0,r.jsx)(X,{pageIdFromURL:e$,streamingDone:!eI}),(0,r.jsx)($.Z,{loading:!eM&&(!q||!eu),fallback:(0,r.jsx)(em,{}),delay:0,children:(0,r.jsxs)("main",{className:"h-[calc(100%-4rem)] pb-8 lg:pb-0",children:[(0,r.jsx)(A.ScrollArea,{className:"h-full w-full",ref:ea,children:(0,r.jsx)("div",{className:"mx-auto grid grid-cols-4 gap-2 px-4 pb-32 lg:max-w-5xl lg:px-0",children:eM&&!eu?(0,r.jsx)("div",{className:"col-span-4 mt-8 rounded-lg border py-2 pl-1 pr-3 ring-2 ring-transparent focus-within:ring-ring focus-visible:ring-ring",children:(0,r.jsx)(er,{onSubmit:eU})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative col-span-3",children:[(0,r.jsxs)("div",{className:"mb-2 mt-8",children:[(0,r.jsx)($.Z,{loading:!eu,fallback:(0,r.jsx)(eh,{}),children:(0,r.jsx)("h1",{className:(0,R.cn)("text-4xl font-semibold",{"animate-pulse text-muted-foreground":eD}),children:null==eu?void 0:eu.title})}),(0,r.jsx)("div",{className:"my-4 flex gap-4 text-sm text-muted-foreground",children:(0,r.jsxs)($.Z,{loading:e4||!(null==eu?void 0:eu.authorId),fallback:(0,r.jsx)(T.O,{}),children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(_.Yt,{user:e5,className:"h-6 w-6"}),(0,r.jsx)("div",{children:null==e5?void 0:e5.name})]}),(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,r.jsx)(E.IconClock,{}),(0,r.jsx)("span",{children:function(e){let t=f()(e);if(t.isBefore(f()().subtract(1,"year"))){let e=t.format("MMM D, YYYY, h:mm A");return e}if(t.isBefore(f()().subtract(1,"month"))){let e=t.format("MMM D, hh:mm A");return"".concat(e)}return"".concat(t.fromNow())}(null==eu?void 0:eu.createdAt)})]})})]})})]}),(0,r.jsx)($.Z,{loading:!eu||eI&&!(null==eu?void 0:eu.content),fallback:(0,r.jsx)(ep,{}),children:(0,r.jsx)(M.J,{message:null!==(s=null==eu?void 0:eu.content)&&void 0!==s?s:"",supportsOnApplyInEditorV2:!1})}),(0,r.jsxs)($.Z,{loading:!eu||eI&&!(null==ev?void 0:ev.length),fallback:(0,r.jsx)("div",{className:"my-8 w-full",children:(0,r.jsx)(ef,{})}),children:[(0,r.jsx)(l.M,{initial:!1,children:null==ev?void 0:ev.map((e,t)=>{let n=eI&&e.id===Q,a=t<ev.length-1;return(0,r.jsxs)(d.E.div,{layout:!eI&&"edit"===U,exit:{opacity:0},className:"space-y-2",children:[(0,r.jsx)(eb,{className:"section-title pt-8 prose-p:leading-tight",section:e}),(0,r.jsx)(eg,{section:e,isGenerating:n,enableMoveUp:0!==t,enableMoveDown:a})]},"section_".concat(e.id))})},"".concat(eI,"-").concat(U)),e6&&"edit"===U&&et&&(0,r.jsx)(ei,{onSubmit:eZ,disabled:!ed||eI,className:"mt-10"})]})]}),(0,r.jsx)("div",{className:"relative col-span-1",children:(0,r.jsx)(G,{sections:ev})})]})})}),(0,r.jsx)(D.K,{className:(0,R.cn)("!fixed !bottom-[5.4rem] !right-4 !top-auto z-40 border-muted-foreground lg:!bottom-[2.85rem]"),container:ea.current,offset:100,style:"dark"===el?{"--background":"0 0% 12%"}:{}})]})})]})})}function ek(e){let{error:t,pageIdFromURL:n}=e;return t.message===x.ir?(0,r.jsx)(F.default,{}):(0,r.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,r.jsx)(X,{pageIdFromURL:n}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(E.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Something went wrong"})]}),(0,r.jsx)("div",{children:"Failed to fetch, please refresh the page"}),(0,r.jsx)(s(),{href:"/",onClick:C.wh,className:(0,R.cn)((0,P.d)(),"mt-4 gap-2"),children:(0,r.jsx)("span",{children:"Home"})})]})})]})}},69579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(36164),a=n(42891),i=n.n(a),s=n(70652),o=n.n(s),l=n(83332),d=n(76531),c=n(57288),u=n(68172),m=n(30601),f=n(63743),h=n(31458),p=n(52569),x=n(7449);function g(){let[e]=(0,m.Hb)(),t=e?{height:"calc(100vh - ".concat(m.wt,")")}:{height:"100vh"};return(0,r.jsxs)("div",{style:t,className:"flex flex-col",children:[(0,r.jsx)(v,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center",children:[(0,r.jsx)("h2",{className:"mt-4 text-6xl font-bold tracking-tight text-foreground sm:text-7xl",children:"404"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Oops, it looks like the page you're looking for doesn't exist."}),(0,r.jsx)(o(),{className:(0,c.cn)("mt-6",(0,h.d)()),href:"/",children:"Home"})]})]})}function v(){return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(o(),{href:"/",children:[(0,r.jsx)(i(),{src:d.Z,alt:"logo",width:128,className:"dark:hidden"}),(0,r.jsx)(i(),{src:l.Z,alt:"logo",width:96,className:"hidden dark:block"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(u.q,{children:(0,r.jsx)(f.T,{})}),(0,r.jsx)(x.Z,{showSetting:!0,children:(0,r.jsx)(p.SQ,{className:"h-10 w-10 border"})})]})]})}},73460:function(e,t,n){"use strict";n.d(t,{OL:function(){return g},_T:function(){return m},aR:function(){return l},f$:function(){return p},fY:function(){return f},le:function(){return v},vW:function(){return d},xo:function(){return h},yT:function(){return x}});var r=n(36164),a=n(3546),i=n(28961),s=n(57288),o=n(31458);let l=i.fC,d=i.xz,c=e=>{let{className:t,children:n,...a}=e;return(0,r.jsx)(i.h_,{className:(0,s.cn)(t),...a,children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:n})})};c.displayName=i.h_.displayName;let u=a.forwardRef((e,t)=>{let{className:n,children:a,...o}=e;return(0,r.jsx)(i.aV,{className:(0,s.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-opacity animate-in fade-in",n),...o,ref:t})});u.displayName=i.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(i.VY,{ref:t,className:(0,s.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-90 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",n),...a})]})});m.displayName=i.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};f.displayName="AlertDialogHeader";let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="AlertDialogFooter";let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,s.cn)("text-lg font-semibold",n),...a})});p.displayName=i.Dx.displayName;let x=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...a})});x.displayName=i.dk.displayName;let g=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(i.aU,{ref:t,className:(0,s.cn)((0,o.d)(),n),...a})});g.displayName=i.aU.displayName;let v=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(i.$j,{ref:t,className:(0,s.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...a})});v.displayName=i.$j.displayName},95052:function(e,t,n){"use strict";n.d(t,{X:function(){return l}});var r=n(36164),a=n(3546),i=n(30317),s=n(57288),o=n(81565);let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(i.fC,{ref:t,className:(0,s.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...a,children:(0,r.jsx)(i.z$,{className:(0,s.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(o.IconCheck,{className:"h-4 w-4"})})})});l.displayName=i.fC.displayName},98150:function(e,t,n){"use strict";n.d(t,{NI:function(){return x},Wi:function(){return u},l0:function(){return d},lX:function(){return p},pf:function(){return g},xJ:function(){return h},zG:function(){return v}});var r=n(36164),a=n(3546),i=n(74047),s=n(5493),o=n(57288),l=n(5266);let d=s.RV,c=a.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(s.Qr,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(f),{getFieldState:n,formState:r}=(0,s.Gc)(),i=e.name||"root",o=n(i,r);if(!r)throw Error("useFormField should be used within <Form>");let{id:l}=t;return{id:l,name:i,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...o}},f=a.createContext({}),h=a.forwardRef((e,t)=>{let{className:n,...i}=e,s=a.useId();return(0,r.jsx)(f.Provider,{value:{id:s},children:(0,r.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",n),...i})})});h.displayName="FormItem";let p=a.forwardRef((e,t)=>{let{className:n,required:a,...i}=e,{error:s,formItemId:d}=m();return(0,r.jsx)(l._,{ref:t,className:(0,o.cn)(s&&"text-destructive",a&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:d,...i})});p.displayName="FormLabel";let x=a.forwardRef((e,t)=>{let{...n}=e,{error:a,formItemId:s,formDescriptionId:o,formMessageId:l}=m();return(0,r.jsx)(i.g7,{ref:t,id:s,"aria-describedby":a?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!a,...n})});x.displayName="FormControl";let g=a.forwardRef((e,t)=>{let{className:n,...a}=e,{formDescriptionId:i}=m();return(0,r.jsx)("div",{ref:t,id:i,className:(0,o.cn)("text-sm text-muted-foreground",n),...a})});g.displayName="FormDescription";let v=a.forwardRef((e,t)=>{let{className:n,children:a,...i}=e,{error:s,formMessageId:l}=m(),d=s?String(null==s?void 0:s.message):a;return d?(0,r.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-sm font-medium text-destructive",n),...i,children:d}):null});v.displayName="FormMessage"},25600:function(e,t,n){"use strict";n.d(t,{FF:function(){return g},Tu:function(){return x},aM:function(){return c},bC:function(){return v},sw:function(){return u},ue:function(){return p},yo:function(){return d}});var r=n(36164),a=n(3546),i=n(4318),s=n(14375),o=n(1663),l=n(57288);let d=i.fC,c=i.xz,u=i.x8,m=i.h_,f=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(i.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a,ref:t})});f.displayName=i.aV.displayName;let h=(0,s.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=a.forwardRef((e,t)=>{let{side:n="right",className:a,children:s,...d}=e;return(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(i.VY,{ref:t,className:(0,l.cn)(h({side:n}),a),...d,children:[s,(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=i.VY.displayName;let x=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};x.displayName="SheetHeader";let g=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};g.displayName="SheetFooter";let v=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",n),...a})});v.displayName=i.Dx.displayName;let b=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...a})});b.displayName=i.dk.displayName},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3546),a=n(11978);function i(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),n=(0,a.useSearchParams)(),i=(0,r.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""},[n]),s=(0,r.useCallback)(r=>{let a=function(e,t,n){var r,a;let i=null===(r=n.searchParams)||void 0===r?void 0:r.set,s=null===(a=n.searchParams)||void 0===a?void 0:a.del,o=new URLSearchParams(t);i&&Object.entries(i).forEach(e=>{let[t,n]=e;return o.set(t,n)}),s&&(Array.isArray(s)?s.forEach(e=>o.delete(e)):o.delete(s));let l=o.toString(),d=e;return l.length>0&&(d+="?".concat(l)),n.hash&&(d+="#".concat(n.hash.replace(/^#/,""))),d}((null==r?void 0:r.pathname)||e,n,r);return r.replace?t.replace(a):t.push(a),a},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:i,updateUrlComponents:s}}},96274:function(e,t,n){"use strict";n.d(t,{BO:function(){return l},RU:function(){return o},uz:function(){return i}});var r=n(27257);let a={pendingThreadId:void 0,pendingThreadTitle:void 0},i=(0,r.Ue)()(()=>({...a})),s=i.setState,o=e=>{let{threadId:t,title:n}=e;s(()=>({pendingThreadId:t,pendingThreadTitle:n}))},l=()=>{s(()=>({pendingThreadId:void 0,pendingThreadTitle:void 0}))}},37266:function(e,t,n){"use strict";n.d(t,{CR:function(){return i},F0:function(){return o},wh:function(){return l}});var r=n(27257);let a={homePage:void 0},i=(0,r.Ue)()(()=>({...a})),s=i.setState,o=e=>s(()=>({homePage:e})),l=()=>s(()=>({homePage:void 0}))},76531:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.526f7cf9.png",height:184,width:607,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASklEQVR4nGPsKQh1f/HshV/PqtNtagrC8p++//rDAgQM//9/ZWJifMZYnRqg9+bVq6iZ51+1SP/5ovH//z8eRgbGbwyMjPxA9n0AMi8g2L1xUkUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},23455:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(65122),a=n(73037),i=n(3546),s=i.useLayoutEffect,o=function(e){var t=i.useRef(e);return s(function(){t.current=e}),t},l=function(e,t){if("function"==typeof e){e(t);return}e.current=t},d=function(e,t){var n=(0,i.useRef)();return(0,i.useCallback)(function(r){e.current=r,n.current&&l(n.current,null),n.current=t,t&&l(t,r)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},u=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},m=null,f=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},h=function(){},p=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],x=!!document.documentElement.currentStyle,g=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=p.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;if(""===r)return null;x&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var a=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:a,borderSize:i}};function v(e,t,n){var r=o(n);i.useLayoutEffect(function(){var n=function(e){return r.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var b=function(e){v(window,"resize",e)},j=function(e){v(document.fonts,"loadingdone",e)},y=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],w=i.forwardRef(function(e,t){var n=e.cacheMeasurements,s=e.maxRows,o=e.minRows,l=e.onChange,c=void 0===l?h:l,p=e.onHeightChange,x=void 0===p?h:p,v=(0,a.Z)(e,y),w=void 0!==v.value,N=i.useRef(null),S=d(N,t),C=i.useRef(0),k=i.useRef(),I=function(){var e,t,r,a,i,l,d,c,h,p,v,b=N.current,j=n&&k.current?k.current:g(b);if(j){k.current=j;var y=(e=b.value||b.placeholder||"x",void 0===(t=o)&&(t=1),void 0===(r=s)&&(r=1/0),m||((m=document.createElement("textarea")).setAttribute("tabindex","-1"),m.setAttribute("aria-hidden","true"),u(m)),null===m.parentNode&&document.body.appendChild(m),a=j.paddingSize,i=j.borderSize,d=(l=j.sizingStyle).boxSizing,Object.keys(l).forEach(function(e){m.style[e]=l[e]}),u(m),m.value=e,c=f(m,j),m.value=e,c=f(m,j),m.value="x",p=(h=m.scrollHeight-a)*t,"border-box"===d&&(p=p+a+i),c=Math.max(p,c),v=h*r,"border-box"===d&&(v=v+a+i),[c=Math.min(v,c),h]),w=y[0],S=y[1];C.current!==w&&(C.current=w,b.style.setProperty("height",w+"px","important"),x(w,{rowHeight:S}))}};return i.useLayoutEffect(I),b(I),j(I),i.createElement("textarea",(0,r.Z)({},v,{onChange:function(e){w||I(),c(e)},ref:S}))})},30317:function(e,t,n){"use strict";n.d(t,{fC:function(){return N},z$:function(){return S}});var r=n(65122),a=n(3546),i=n(79869),s=n(47091),o=n(65727),l=n(27250),d=n(81544),c=n(96593),u=n(96497),m=n(72205);let f="Checkbox",[h,p]=(0,s.b)(f),[x,g]=h(f),v=(0,a.forwardRef)((e,t)=>{let{__scopeCheckbox:n,name:s,checked:d,defaultChecked:c,required:u,disabled:f,value:h="on",onCheckedChange:p,...g}=e,[v,b]=(0,a.useState)(null),N=(0,i.e)(t,e=>b(e)),S=(0,a.useRef)(!1),C=!v||!!v.closest("form"),[k=!1,I]=(0,l.T)({prop:d,defaultProp:c,onChange:p}),R=(0,a.useRef)(k);return(0,a.useEffect)(()=>{let e=null==v?void 0:v.form;if(e){let t=()=>I(R.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[v,I]),(0,a.createElement)(x,{scope:n,state:k,disabled:f},(0,a.createElement)(m.WV.button,(0,r.Z)({type:"button",role:"checkbox","aria-checked":y(k)?"mixed":k,"aria-required":u,"data-state":w(k),"data-disabled":f?"":void 0,disabled:f,value:h},g,{ref:N,onKeyDown:(0,o.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.M)(e.onClick,e=>{I(e=>!!y(e)||!e),C&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})})),C&&(0,a.createElement)(j,{control:v,bubbles:!S.current,name:s,value:h,checked:k,required:u,disabled:f,style:{transform:"translateX(-100%)"}}))}),b=(0,a.forwardRef)((e,t)=>{let{__scopeCheckbox:n,forceMount:i,...s}=e,o=g("CheckboxIndicator",n);return(0,a.createElement)(u.z,{present:i||y(o.state)||!0===o.state},(0,a.createElement)(m.WV.span,(0,r.Z)({"data-state":w(o.state),"data-disabled":o.disabled?"":void 0},s,{ref:t,style:{pointerEvents:"none",...e.style}})))}),j=e=>{let{control:t,checked:n,bubbles:i=!0,...s}=e,o=(0,a.useRef)(null),l=(0,d.D)(n),u=(0,c.t)(t);return(0,a.useEffect)(()=>{let e=o.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked"),a=r.set;if(l!==n&&a){let t=new Event("click",{bubbles:i});e.indeterminate=y(n),a.call(e,!y(n)&&n),e.dispatchEvent(t)}},[l,n,i]),(0,a.createElement)("input",(0,r.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!y(n)&&n},s,{tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return"indeterminate"===e}function w(e){return y(e)?"indeterminate":e?"checked":"unchecked"}let N=v,S=b},6044:function(e,t,n){"use strict";n.d(t,{VY:function(){return R},aV:function(){return k},fC:function(){return C},nU:function(){return w},xz:function(){return I}});var r=n(65122),a=n(3546),i=n(65727),s=n(47091),o=n(1333),l=n(96497),d=n(72205),c=n(57541),u=n(27250),m=n(29434);let f="Tabs",[h,p]=(0,s.b)(f,[o.Pc]),x=(0,o.Pc)(),[g,v]=h(f),b=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:i,onValueChange:s,defaultValue:o,orientation:l="horizontal",dir:f,activationMode:h="automatic",...p}=e,x=(0,c.gm)(f),[v,b]=(0,u.T)({prop:i,onChange:s,defaultProp:o});return(0,a.createElement)(g,{scope:n,baseId:(0,m.M)(),value:v,onValueChange:b,orientation:l,dir:x,activationMode:h},(0,a.createElement)(d.WV.div,(0,r.Z)({dir:x,"data-orientation":l},p,{ref:t})))}),j=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,loop:i=!0,...s}=e,l=v("TabsList",n),c=x(n);return(0,a.createElement)(o.fC,(0,r.Z)({asChild:!0},c,{orientation:l.orientation,dir:l.dir,loop:i}),(0,a.createElement)(d.WV.div,(0,r.Z)({role:"tablist","aria-orientation":l.orientation},s,{ref:t})))}),y=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:s,disabled:l=!1,...c}=e,u=v("TabsTrigger",n),m=x(n),f=N(u.baseId,s),h=S(u.baseId,s),p=s===u.value;return(0,a.createElement)(o.ck,(0,r.Z)({asChild:!0},m,{focusable:!l,active:p}),(0,a.createElement)(d.WV.button,(0,r.Z)({type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:f},c,{ref:t,onMouseDown:(0,i.M)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(s)}),onKeyDown:(0,i.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(s)}),onFocus:(0,i.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;p||l||!e||u.onValueChange(s)})})))}),w=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:i,forceMount:s,children:o,...c}=e,u=v("TabsContent",n),m=N(u.baseId,i),f=S(u.baseId,i),h=i===u.value,p=(0,a.useRef)(h);return(0,a.useEffect)(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.createElement)(l.z,{present:s||h},({present:n})=>(0,a.createElement)(d.WV.div,(0,r.Z)({"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!n,id:f,tabIndex:0},c,{ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0}}),n&&o))});function N(e,t){return`${e}-trigger-${t}`}function S(e,t){return`${e}-content-${t}`}let C=b,k=j,I=y,R=w},81544:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});var r=n(3546);function a(e){let t=(0,r.useRef)({value:e,previous:e});return(0,r.useMemo)(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[7565,8415,4648,6527,7430,8516,1652,340,4007,2546,1283,3449,2578,8511,240,4421,2287,7070,1454,1002,8961,4546,4553,9275,9148,6482,2991,7581,5738,2812,8160,7288,1565,4656,9634,4129,3375,5289,1744],function(){return e(e.s=72282)}),_N_E=e.O()}]);