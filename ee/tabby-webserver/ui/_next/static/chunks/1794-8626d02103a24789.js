"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1794],{63484:function(e,t,a){a.d(t,{U$:function(){return c},t:function(){return m}});var n=a(14283),s=a.n(n),l=a(34021),i=a(74630),r=a(18500),o=JSON.parse('{"Mercury":"#ff2b2b","TypeScript":"#2b7489","PureBasic":"#5a6986","Objective-C++":"#6866fb","Self":"#0579aa","edn":"#db5855","NewLisp":"#87AED7","Jupyter Notebook":"#DA5B0B","Rebol":"#358a5b","Frege":"#00cafe","Dart":"#00B4AB","AspectJ":"#a957b0","Shell":"#89e051","Web Ontology Language":"#9cc9dd","xBase":"#403a40","Eiffel":"#946d57","Nix":"#7e7eff","RAML":"#77d9fb","MTML":"#b7e1f4","Racket":"#22228f","Elixir":"#6e4a7e","SAS":"#B34936","Agda":"#315665","wisp":"#7582D1","D":"#ba595e","Kotlin":"#F18E33","Opal":"#f7ede0","Crystal":"#776791","Objective-C":"#438eff","ColdFusion CFC":"#ed2cd6","Oz":"#fab738","Mirah":"#c7a938","Objective-J":"#ff0c5a","Gosu":"#82937f","FreeMarker":"#0050b2","Ruby":"#701516","Component Pascal":"#b0ce4e","Arc":"#aa2afe","Brainfuck":"#2F2530","Nit":"#009917","APL":"#5A8164","Go":"#375eab","Visual Basic":"#945db7","PHP":"#4F5D95","Cirru":"#ccccff","SQF":"#3F3F3F","Glyph":"#e4cc98","Java":"#b07219","MAXScript":"#00a6a6","Scala":"#DC322F","Makefile":"#427819","ColdFusion":"#ed2cd6","Perl":"#0298c3","Lua":"#000080","Vue":"#2c3e50","Verilog":"#b2b7f8","Factor":"#636746","Haxe":"#df7900","Pure Data":"#91de79","Forth":"#341708","Red":"#ee0000","Hy":"#7790B2","Volt":"#1F1F1F","LSL":"#3d9970","eC":"#913960","CoffeeScript":"#244776","HTML":"#e44b23","Lex":"#DBCA00","API Blueprint":"#2ACCA8","Swift":"#ffac45","C":"#555555","AutoHotkey":"#6594b9","Isabelle":"#FEFE00","Metal":"#8f14e9","Clarion":"#db901e","JSONiq":"#40d47e","Boo":"#d4bec1","AutoIt":"#1C3552","Clojure":"#db5855","Rust":"#dea584","Prolog":"#74283c","SourcePawn":"#5c7611","AMPL":"#E6EFBB","FORTRAN":"#4d41b1","ANTLR":"#9DC3FF","Harbour":"#0e60e3","Tcl":"#e4cc98","BlitzMax":"#cd6400","PigLatin":"#fcd7de","Lasso":"#999999","ECL":"#8a1267","VHDL":"#adb2cb","Elm":"#60B5CC","Propeller Spin":"#7fa2a7","X10":"#4B6BEF","IDL":"#a3522f","ATS":"#1ac620","Ada":"#02f88c","Unity3D Asset":"#ab69a1","Nu":"#c9df40","LFE":"#004200","SuperCollider":"#46390b","Oxygene":"#cdd0e3","ASP":"#6a40fd","Assembly":"#6E4C13","Gnuplot":"#f0a9f0","JFlex":"#DBCA00","NetLinx":"#0aa0ff","Turing":"#45f715","Vala":"#fbe5cd","Processing":"#0096D8","Arduino":"#bd79d1","FLUX":"#88ccff","NetLogo":"#ff6375","CSharp":"#178600","CSS":"#563d7c","Emacs Lisp":"#c065db","Stan":"#b2011d","SaltStack":"#646464","QML":"#44a51c","Pike":"#005390","LOLCODE":"#cc9900","ooc":"#b0b77e","Handlebars":"#01a9d6","J":"#9EEDFF","Mask":"#f97732","EmberScript":"#FFF4F3","TeX":"#3D6117","Nemerle":"#3d3c6e","KRL":"#28431f","Ren\'Py":"#ff7f7f","Unified Parallel C":"#4e3617","Golo":"#88562A","Fancy":"#7b9db4","OCaml":"#3be133","Shen":"#120F14","Pascal":"#b0ce4e","F#":"#b845fc","Puppet":"#302B6D","ActionScript":"#882B0F","Diff":"#88dddd","Ragel in Ruby Host":"#9d5200","Fantom":"#dbded5","Zephir":"#118f9e","Click":"#E4E6F3","Smalltalk":"#596706","DM":"#447265","Ioke":"#078193","PogoScript":"#d80074","LiveScript":"#499886","JavaScript":"#f1e05a","VimL":"#199f4b","PureScript":"#1D222D","ABAP":"#E8274B","Matlab":"#bb92ac","Slash":"#007eff","R":"#198ce7","Erlang":"#B83998","Pan":"#cc0000","LookML":"#652B81","Eagle":"#814C05","Scheme":"#1e4aec","PLSQL":"#dad8d8","Python":"#3572A5","Max":"#c4a79c","Common Lisp":"#3fb68b","Latte":"#A8FF97","XQuery":"#5232e7","Omgrofl":"#cabbff","XC":"#99DA07","Nimrod":"#37775b","SystemVerilog":"#DAE1C2","Chapel":"#8dc63f","Groovy":"#e69f56","Dylan":"#6c616e","E":"#ccce35","Parrot":"#f3ca0a","Grammatical Framework":"#79aa7a","Game Maker Language":"#8fb200","Papyrus":"#6600cc","NetLinx+ERB":"#747faa","Clean":"#3F85AF","Alloy":"#64C800","Squirrel":"#800000","PAWN":"#dbb284","UnrealScript":"#a54c4d","Standard ML":"#dc566d","Slim":"#ff8f77","Perl6":"#0000fb","Julia":"#a270ba","Haskell":"#29b544","NCL":"#28431f","Io":"#a9188d","Rouge":"#cc0088","cpp":"#f34b7d","AGS Script":"#B9D9FF","Dogescript":"#cca760","nesC":"#94B0C7"}'),f={abap:{filenames:[],extnames:["abap"]},actionscript:{filenames:[],extnames:["as"]},ada:{filenames:[],extnames:["ada","adb","ads"]},apacheconf:{filenames:[".htaccess","apache2.conf","httpd.conf"],extnames:["apacheconf","vhost"]},apl:{filenames:[],extnames:["apl","dyalog"]},applescript:{filenames:[],extnames:["applescript","scpt"]},arff:{filenames:[],extnames:["arff"]},asciidoc:{filenames:[],extnames:["asciidoc","adoc","asc"]},asm6502:{filenames:[],extnames:["asm"]},autohotkey:{filenames:[],extnames:["ahk","ahkl"]},autoit:{filenames:[],extnames:["au3"]},bash:{filenames:[".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".login",".profile",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_logout","bash_profile","bashrc","cshrc","gradlew","login","man","profile","zlogin","zlogout","zprofile","zshenv","zshrc"],extnames:["sh","bash","bats","cgi","command","fcgi","ksh","tmux","tool","zsh"]},basic:{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},batch:{filenames:[],extnames:["bat","cmd"]},bison:{filenames:[],extnames:["bison"]},brainfuck:{filenames:[],extnames:["b","bf"]},bro:{filenames:[],extnames:["bro"]},c:{filenames:[],extnames:["c","cats","h","idc"]},csharp:{filenames:[],extnames:["cs","cake","cshtml","csx"]},cpp:{filenames:[],extnames:["cpp","c++","cc","cp","cxx","h","h++","hh","hpp","hxx","inc","inl","ino","ipp","re","tcc","tpp"]},coffeescript:{filenames:["Cakefile"],extnames:["coffee","_coffee","cake","cjsx","iced"]},clojure:{filenames:["riemann.config"],extnames:["clj","boot","cl2","cljc","cljs","cljs.hl","cljscm","cljx","hic"]},crystal:{filenames:[],extnames:["cr"]},css:{filenames:[],extnames:["css"]},d:{filenames:[],extnames:["d","di"]},dart:{filenames:[],extnames:["dart"]},diff:{filenames:[],extnames:["diff","patch"]},django:{filenames:[],extnames:["jinja","jinja2","mustache","njk"]},dockerfile:{filenames:["Dockerfile"],extnames:["dockerfile"]},eiffel:{filenames:[],extnames:["e"]},elixir:{filenames:["mix.lock"],extnames:["ex","exs"]},elm:{filenames:[],extnames:["elm"]},erb:{filenames:[],extnames:["erb"]},erlang:{filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"],extnames:["erl","app.src","es","escript","hrl","xrl","yrl"]},fsharp:{filenames:[],extnames:["fs","fsi","fsx"]},fortran:{filenames:[],extnames:["f90","f","f03","f08","f77","f95","for","fpp"]},gedcom:{filenames:[],extnames:["ged"]},gherkin:{filenames:[],extnames:["feature"]},glsl:{filenames:[],extnames:["glsl","fp","frag","frg","fs","fsh","fshader","geo","geom","glslv","gshader","shader","tesc","tese","vert","vrx","vsh","vshader"]},go:{filenames:[],extnames:["go"]},graphql:{filenames:[],extnames:["graphql","gql"]},groovy:{filenames:["Jenkinsfile"],extnames:["groovy","grt","gtpl","gvy"]},haml:{filenames:[],extnames:["haml"]},handlebars:{filenames:[],extnames:["handlebars","hbs"]},haskell:{filenames:[],extnames:["hs","hsc"]},haxe:{filenames:[],extnames:["hx","hxsl"]},http:{filenames:[],extnames:["http"]},icon:{filenames:[],extnames:["icn"]},inform7:{filenames:[],extnames:["ni","i7x"]},ini:{filenames:[".editorconfig",".gitconfig"],extnames:["ini","cfg","lektorproject","prefs","pro","properties"]},io:{filenames:[],extnames:["io"]},j:{filenames:[],extnames:["ijs"]},java:{filenames:[],extnames:["java"]},javascript:{filenames:["Jakefile"],extnames:["js","_js","cjs","bones","es","es6","frag","gs","jake","jsb","jscad","jsfl","jsm","jss","mjs","njs","pac","sjs","ssjs","xsjs","xsjslib"]},jolie:{filenames:[],extnames:["ol","iol"]},json:{filenames:[".arcconfig",".htmlhintrc",".tern-config",".tern-project","composer.lock","mcmod.info"],extnames:["json","avsc","geojson","gltf","JSON-tmLanguage","jsonl","tfstate","topojson","webapp","webmanifest","yy","yyp"]},julia:{filenames:[],extnames:["jl"]},keyman:{filenames:[],extnames:["kmn"]},kotlin:{filenames:[],extnames:["kt","ktm","kts"]},latex:{filenames:[],extnames:["tex","aux","bbx","bib","cbx","cls","dtx","ins","lbx","ltx","mkii","mkiv","mkvi","sty","toc"]},less:{filenames:[],extnames:["less"]},liquid:{filenames:[],extnames:["liquid"]},lisp:{filenames:[],extnames:["lisp","asd","cl","l","lsp","ny","podsl","sexp"]},livescript:{filenames:["Slakefile"],extnames:["ls","_ls"]},lolcode:{filenames:[],extnames:["lol"]},lua:{filenames:[],extnames:["lua","fcgi","nse","p8","pd_lua","rbxs","wlua"]},cmake:{filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"],extnames:["mak","d","make","mk","mkfile"]},markdown:{filenames:["contents.lr","LICENSE"],extnames:["md","markdown","mdown","mdwn","mkd","mkdn","mkdown","ronn","workbook"]},markup:{filenames:[],extnames:["apib","blade","chem","ecr","eex","ejs","html","htm","ipynb","kit","latte","marko","mask","mtml","phtml","pic","raml","rhtml","vue","xht","xhtml"]},matlab:{filenames:[],extnames:["matlab","m"]},mel:{filenames:[],extnames:["mel"]},mizar:{filenames:[],extnames:["miz","voc"]},monkey:{filenames:[],extnames:["monkey","monkey2"]},n4js:{filenames:[],extnames:["n4jsd"]},nasm:{filenames:[],extnames:["nasm"]},nginx:{filenames:["nginx.conf"],extnames:["nginxconf","vhost"]},nim:{filenames:[],extnames:["nim","nimrod"]},nix:{filenames:[],extnames:["nix"]},nsis:{filenames:[],extnames:["nsi","nsh"]},objectivec:{filenames:[],extnames:["m","h"]},ocaml:{filenames:[],extnames:["ml","eliom","eliomi","ml4","mli","mll","mly"]},opencl:{filenames:[],extnames:["opencl","cl"]},oz:{filenames:[],extnames:["oz"]},pascal:{filenames:[],extnames:["pas","dfm","dpr","inc","lpr","pascal","pp"]},perl:{filenames:["Makefile.PL","Rexfile","ack","cpanfile"],extnames:["pl","al","cgi","fcgi","perl","ph","plx","pm","psgi","t"]},php:{filenames:[".php",".php_cs",".php_cs.dist","Phakefile"],extnames:["php","aw","ctp","fcgi","inc","php3","php4","php5","phps","phpt"]},plsql:{filenames:[],extnames:["pls","bdy","ddl","fnc","pck","pkb","pks","plb","plsql","prc","spc","tpb","tps","trg","vw"]},powershell:{filenames:[],extnames:["ps1","psd1","psm1"]},processing:{filenames:[],extnames:["pde"]},prolog:{filenames:[],extnames:["pl","pro","prolog","yap"]},properties:{filenames:[],extnames:["properties"]},protobuf:{filenames:[],extnames:["proto"]},pug:{filenames:[],extnames:["jade","pug"]},puppet:{filenames:["Modulefile"],extnames:["pp"]},pure:{filenames:[],extnames:["pure"]},python:{filenames:[".gclient","BUCK","BUILD","BUILD.bazel","SConscript","SConstruct","Snakefile","WORKSPACE","wscript"],extnames:["py","bzl","cgi","fcgi","gyp","gypi","lmi","py3","pyde","pyi","pyp","pyt","pyw","rpy","spec","tac","wsgi","xpy"]},q:{filenames:[],extnames:["q"]},qore:{filenames:[],extnames:["q","qm","qtest"]},r:{filenames:[".Rprofile","expr-dist"],extnames:["r","rd","rsx"]},jsx:{filenames:[],extnames:["jsx"]},toml:{filenames:[],extnames:["toml"]},tsx:{filenames:[],extnames:["tsx"]},renpy:{filenames:[],extnames:["rpy"]},reason:{filenames:[],extnames:["re","rei"]},rest:{filenames:[],extnames:["rst","rest"]},rip:{filenames:[],extnames:["rip"]},ruby:{filenames:[".irbrc",".pryrc","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Gemfile.lock","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Thorfile","Vagrantfile","buildfile"],extnames:["rb","builder","eye","fcgi","gemspec","god","jbuilder","mspec","pluginspec","podspec","rabl","rake","rbuild","rbw","rbx","ru","ruby","spec","thor","watchr"]},rust:{filenames:[],extnames:["rs"]},sas:{filenames:[],extnames:["sas"]},sass:{filenames:[],extnames:["sass"]},scss:{filenames:[],extnames:["scss"]},scala:{filenames:[],extnames:["scala","kojo","sbt","sc"]},scheme:{filenames:[],extnames:["scm","sch","sld","sls","sps","ss"]},smalltalk:{filenames:[],extnames:["st","cs"]},smarty:{filenames:[],extnames:["tpl"]},sql:{filenames:[],extnames:["sql","cql","ddl","inc","mysql","prc","tab","udf","viw"]},soy:{filenames:[],extnames:["soy"]},stylus:{filenames:[],extnames:["styl"]},swift:{filenames:[],extnames:["swift"]},tcl:{filenames:["owh","starfield"],extnames:["tcl","adp","tm"]},textile:{filenames:[],extnames:["textile"]},tt2:{filenames:[],extnames:["pm"]},twig:{filenames:[],extnames:["twig"]},typescript:{filenames:[],extnames:["ts"]},velocity:{filenames:[],extnames:["vm"]},verilog:{filenames:[],extnames:["v","veo"]},vhdl:{filenames:[],extnames:["vhdl","vhd","vhf","vhi","vho","vhs","vht","vhw"]},vim:{filenames:[".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"],extnames:["vim"]},"visual-basic":{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},wasm:{filenames:[],extnames:["wast","wat"]},xojo:{filenames:[],extnames:["xojo_code","xojo_menu","xojo_report","xojo_script","xojo_toolbar","xojo_window"]},xquery:{filenames:[],extnames:["xquery","xq","xql","xqm","xqy"]},yaml:{filenames:[".clang-format",".clang-tidy",".gemrc","glide.lock"],extnames:["yml","mir","reek","rviz","sublime-syntax","syntax","yaml","yaml-tmlanguage"]}};Object.entries(o).reduce((e,t)=>{let[a,n]=t;return{...e,[a.toLocaleLowerCase()]:n}},{});let c=e=>{let t={},a={};for(let[e,n]of Object.entries(f)){for(let a of n.filenames)(0,l.Z)(t,a)||(t[a]=[]),t[a].push(e);for(let t of n.extnames)(0,l.Z)(a,t)||(a[t]=[]),a[t].push(e)}return[].concat(t[s().basename(e)],a[s().extname(e).substring(1)]).filter(Boolean)},m=(e,t)=>{let a=()=>(0,i.Z)(t)?"Other":t;if(!e)return a();let n=Object.values(r.SQ).map(e=>e.toLocaleLowerCase()).indexOf(e.toLocaleLowerCase());if(-1===n)return a();let s=Object.keys(r.SQ)[n];return({csharp:"C#",cpp:"C++",javascript:"JavaScript",typescript:"TypeScript",php:"PHP"})[s.toLocaleLowerCase()]||s}},17451:function(e,t,a){a.d(t,{Eg:function(){return c},UP:function(){return p},aK:function(){return o},qs:function(){return d},xt:function(){return m}});var n=a(27257),s=a(85654),l=a(57288);let i=["activeChatId","pendingUserMessage"],r={activeChatId:(0,l.x0)(),selectedModel:void 0,selectedRepoSourceId:void 0,enableActiveSelection:!0,pendingUserMessage:void 0},o=(0,n.Ue)()((0,s.tJ)(()=>({...r}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!i.includes(t)})),version:1})),f=o.setState,c=e=>{f(()=>({selectedModel:e}))},m=e=>{f(()=>({selectedRepoSourceId:e}))},d=e=>{f(()=>({enableActiveSelection:e}))},p=e=>{f(()=>({pendingUserMessage:e}))}},23342:function(e,t){t.Z={src:"/_next/static/media/tabby.16ac81a9.png",height:175,width:175,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA50lEQVR42mMAgUWTGw3KsqO9QOypZeG6NekBuQzI4NCmmaZtFam/K6PtHzYlOH5ysDX7n5QYboJQsKrfd1JN6v+ldXH/F+fa/fWyNf4fEebXBlcwsSbNeWV/+f9FE+t+za2K+xNjLfPf293u6v///xkZQGDDwr7gfetm/d8xr+VPkpXgnzR3nf/xAY6vt6yfK84AUrV5+US9HWtnnVgyrfm/tiTD/9JAo//5Ea5nGUDAkoGBCUQHWEiZysuI7LcwN7wb6WV1IT7YzR7uhh3Lepg+AU2av2AiT0pCuDKDayAvSLwsM4oJAH4LXl0Gpb0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},11075:function(e,t,a){a.d(t,{eI:function(){return l},n0:function(){return i},uL:function(){return s}});var n=a(44494);let s="0.8.0";async function l(e,t){let a=(0,n.K9)(e,{expose:{refresh:t.refresh,onApplyInEditor:t.onApplyInEditor,onApplyInEditorV2:t.onApplyInEditorV2,onLoaded:t.onLoaded,onCopy:t.onCopy,onKeyboardEvent:t.onKeyboardEvent,lookupSymbol:t.lookupSymbol,openInEditor:t.openInEditor,openExternal:t.openExternal,readWorkspaceGitRepositories:t.readWorkspaceGitRepositories,getActiveEditorSelection:t.getActiveEditorSelection,fetchSessionState:t.fetchSessionState,storeSessionState:t.storeSessionState,listFileInWorkspace:t.listFileInWorkspace,readFileContent:t.readFileContent}}),s=await a._requestMethods(),l={};for(let e of s)l[e]=a[e];return l}async function i(e){let t=(0,n.cy)({expose:{init:e.init,executeCommand:e.executeCommand,showError:e.showError,cleanError:e.cleanError,addRelevantContext:e.addRelevantContext,updateTheme:e.updateTheme,updateActiveSelection:e.updateActiveSelection,navigate:e.navigate}}),a=await t._requestMethods(),s={};for(let e of a)s[e]=t[e];return s.hasCapability=t.hasCapability,s}},14439:function(e,t,a){a.d(t,{H:function(){return i},m:function(){return l}});var n=a(3546),s=a(11075);function l(e,t){let[a,l]=(0,n.useState)(null),i=!1;return(0,n.useEffect)(()=>{e.current&&!i&&(i=!0,(0,s.eI)(e.current,t).then(l))},[e.current]),a}function i(e){let[t,a]=(0,n.useState)(null),l=!1;return(0,n.useEffect)(()=>{let t=window.self!==window.top;t&&!l&&(l=!0,(0,s.n0)(e).then(a))},[]),t}a(44494)},44494:function(e,t,a){a.d(t,{K9:function(){return g},cy:function(){return y}});let n=Symbol.for("quilt.threads.retain"),s=Symbol.for("quilt.threads.release"),l=Symbol.for("quilt.threads.retained-by"),i=Symbol.for("quilt.threads.encode"),r=Symbol.for("quilt.threads.transferable");class o{memoryManaged=new Set;add(e){this.memoryManaged.add(e),e[l].add(this),e[n]()}release(){for(let e of this.memoryManaged)e[l].delete(this),e[s]();this.memoryManaged.clear()}}function f(e){return!!(e&&e[n]&&e[s])}function c(e){if(null==e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}function m(e,{expose:t,callable:a,signal:m,uuid:u=p,encoder:x=function({encode:e,decode:t}={}){return{encode:function(e,t){let n={api:t,seen:new Map,encode:e=>a(e,n,!0)};return a(e,n)},decode:function(e,t,a){let s={api:t,decode:e=>n(e,s,a,!0)};return n(e,s)}};function a(t,n,s=!1){let{seen:l,api:o,encode:f}=n;if(!s&&e)return e(t,f);if(null==t)return[t];let m=l.get(t);if(m)return m;if(l.set(t,[void 0]),"object"==typeof t){if(t[r]){let e=[t,[t]];return l.set(t,e),e}let e=[],s=t=>{let[s,l=[]]=a(t,n);return e.push(...l),s};if("function"==typeof t[i]){let a=t[i]({encode:s}),n=[a,e];return l.set(t,n),n}if(Array.isArray(t)){let a=t.map(e=>s(e)),n=[a,e];return l.set(t,n),n}if(t instanceof RegExp){let a={"_@r":[t.source,t.flags]},n=[a,e];return l.set(t,n),n}if(t instanceof URL){let a={"_@u":t.href},n=[a,e];return l.set(t,n),n}if(t instanceof Date){let a={"_@d":t.toISOString()},n=[a,e];return l.set(t,n),n}if(t instanceof Map){let a=[...t.entries()].map(([e,t])=>[s(e),s(t)]),n=[{"_@m":a},e];return l.set(t,n),n}if(t instanceof Set){let a=[...t].map(e=>s(e)),n=[{"_@s":a},e];return l.set(t,n),n}let o=null!=t&&(Symbol.asyncIterator in t||Symbol.iterator in t)&&"function"==typeof t.next;if(c(t)||o){let a={};for(let e of Object.keys(t))a[e]=s(t[e]);o&&(a.next??=s(t.next.bind(t)),a.return??=s(t.return.bind(t)),a.throw??=s(t.throw.bind(t)),a["_@i"]=!0);let n=[a,e];return l.set(t,n),n}}if("function"==typeof t){let e=o.functions?.add(t);if(null==e)return[e];let a=[{"_@f":e}];return l.set(t,a),a}let d=[t];return l.set(t,d),d}function n(e,a,s,l=!1){let{api:i,decode:r}=a;if(!l&&t)return t(e,r,s);if("object"==typeof e){if(null==e)return e;if(Array.isArray(e))return e.map(e=>n(e,a,s));if("_@r"in e)return new RegExp(...e["_@r"]);if("_@u"in e)return new URL(e["_@u"]);if("_@d"in e)return new Date(e["_@d"]);if("_@m"in e)return new Map(e["_@m"].map(([e,t])=>[n(e,a,s),n(t,a,s)]));if("_@s"in e)return new Set(e["_@s"].map(e=>n(e,a,s)));if("_@f"in e){let t=e["_@f"],a=i.functions?.get(t);if(s&&f(a))for(let e of s)e.add(a);return a}if(!c(e))return e;let t={};for(let l of Object.keys(e))"_@i"===l?t[Symbol.asyncIterator]=()=>t:t[l]=n(e[l],a,s);return t}return e}}()}={}){let b=!1,h=new Map,g=new Map,y=new Map,k=new Map;if(t)for(let e of Object.keys(t)){let a=t[e];"function"==typeof a&&h.set(e,a)}let v=new Map,w=function(e,t,a){let n;if(null==t){if("function"!=typeof Proxy)throw Error("You must pass an array of callable methods in environments without Proxies.");let t=new Map;n=new Proxy({},{get(n,s){if("then"===s)return;if("_requestMethods"===s)return a?._requestMethods;if(t.has(s))return t.get(s);let l=e(s);return t.set(s,l),l}})}else for(let a of(n={},t))Object.defineProperty(n,a,{value:e(a),writable:!1,configurable:!0,enumerable:!0});return n}(function(e){return(...t)=>{try{if(b)throw new d;if("string"!=typeof e&&"number"!=typeof e)throw Error(`Can’t call a symbol method on a thread: ${e.toString()}`);if("hasCapability"===e){let e=t[0],a=u(),n=C(a);return j(7,[a,e]),n}let a=u(),n=C(a),[s,l]=x.encode(t,S);return j(0,[a,e,s],l),n}catch(e){return Promise.reject(e)}}},a,{_requestMethods:M}),S={functions:{add(e){let t=g.get(e);return null==t&&(t=u(),g.set(e,t),y.set(t,e)),t},get(e){let t=k.get(e);if(t)return t;let a=0,i=!1;return Object.defineProperties(t=(...t)=>{if(i)throw Error("You attempted to call a function that was already released.");if(!k.has(e))throw Error("You attempted to call a function that was already revoked.");let[a,n]=x.encode(t,S),s=u(),l=C(s);return j(5,[s,e,a],n),l},{[s]:{value:()=>{0==(a-=1)&&(i=!0,k.delete(e),j(3,[e]))},writable:!1},[n]:{value:()=>{a+=1},writable:!1},[l]:{value:new Set,writable:!1}}),k.set(e,t),t}}},A=()=>{if(!b){for(let e of v.keys())L(e,new d);b=!0,h.clear(),v.clear(),g.clear(),y.clear(),k.clear()}};return m?.addEventListener("abort",()=>{j(2,[]),A()},{once:!0}),e.listen(E,{signal:m}),w;function j(t,a,n){b||e.send([t,a],n)}async function E(e){let t=Array.isArray(e)&&"number"==typeof e[0]&&(null==e[1]||Array.isArray(e[1]));if(t)switch(e[0]){case 2:A();break;case 0:{let t=new o,[a,n,s]=e[1],l=h.get(n);try{if(null==l)throw Error(`No '${n}' method is exposed on this endpoint`);let e=await l(...x.decode(s,S,[t])),[i,r]=x.encode(e,S);j(1,[a,void 0,i],r)}catch(s){let{name:e,message:t,stack:n}=s;j(1,[a,{name:e,message:t,stack:n}])}finally{t.release()}break}case 1:case 6:L(...e[1]);break;case 3:{let[t]=e[1],a=y.get(t);a&&(y.delete(t),g.delete(a));break}case 5:{let[t,a,n]=e[1],s=new o;try{let e=y.get(a);if(null==e)throw Error("You attempted to call a function that was already released.");let i=await e(...x.decode(n,S,f(e)?[...e[l],s]:[s])),[r,o]=x.encode(i,S);j(6,[t,void 0,r],o)}catch(s){let{name:e,message:a,stack:n}=s;j(6,[t,{name:e,message:a,stack:n}])}finally{s.release()}break}case 7:{let[t,a]=e[1],n=h.has(a);j(1,[t,void 0,x.encode(n,S)[0]]);break}case 8:{let[t]=e[1],a=Array.from(h.keys());j(1,[t,void 0,x.encode(a,S)[0]])}}}function C(e){let t=new Promise((t,a)=>{v.set(e,(e,n,s)=>{if(null==n)t(x.decode(s,S));else{let e=Error();Object.assign(e,n),a(e)}})});return Object.defineProperty(t,Symbol.asyncIterator,{async *value(){let e=await t;Object.defineProperty(e,Symbol.asyncIterator,{value:()=>e}),yield*e}}),t}function L(...e){let t=e[0],a=v.get(t);a&&(a(...e),v.delete(t))}async function M(){let e=u(),t=C(e);return j(8,[e]),t}}class d extends Error{constructor(){super("You attempted to call a function on a terminated thread.")}}function p(){return`${u()}-${u()}-${u()}-${u()}`}function u(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}var x=a(18400);let b="quilt.threads.ping",h="quilt.threads.pong";function g(e,{targetOrigin:t="*",...a}={}){let n=!1,s=function(a,n){e.contentWindow?.postMessage(a,t,n)},l=new Promise(t=>{let l=a.signal?new x.z(a.signal):new AbortController;window.addEventListener("message",a=>{a.source===e.contentWindow&&a.data===h&&(n=!0,l.abort(),t())},{signal:l.signal}),l.signal.addEventListener("abort",()=>{t()},{once:!0}),s(b)});return m({send:(e,t)=>n?s(e,t):l.then(()=>{if(n)return s(e,t)}),listen(t,{signal:a}){self.addEventListener("message",a=>{a.source===e.contentWindow&&a.data!==h&&t(a.data)},{signal:a})}},a)}function y({targetOrigin:e="*",...t}={}){if("undefined"==typeof self||null==self.parent)throw Error("You are not inside an iframe, because there is no parent window.");let{parent:a}=self,n=t.signal?new x.z(t.signal):new AbortController,s=()=>{let n=()=>a.postMessage(h,e);self.addEventListener("message",({data:e})=>{e===b&&n()},{signal:t.signal}),n()};return"complete"===document.readyState?s():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&(s(),n.abort())},{signal:n.signal}),m({send:(t,n)=>a.postMessage(t,e,n),listen(e,{signal:t}){self.addEventListener("message",t=>{t.data!==b&&e(t.data)},{signal:t})}},t)}}}]);